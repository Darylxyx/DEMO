(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f9137ba"],{"76db":function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("div",{ref:"stats"}),e("div",{ref:"card",staticClass:"card"},[e("p",[t._v("名称: "+t._s(t.dataInfo.name||"-"))]),e("p",[t._v("占比: "+t._s(t.dataInfo.percent||"-"))])]),e("div",{ref:"canvas",attrs:{id:"WebGL-output"}})])},i=[],o=e("f383"),s=window.TWEEN,r=Math.PI,d=Math.cos,c=Math.sin,h=new THREE.Group,u=new THREE.Group,l={mixins:[o["a"]],data:function(){return{dataInfo:{}}},methods:{initWebGL:function(){var t=this.initBasics(this.$refs.canvas,{position:{x:0,y:25,z:20}},{clearColor:15856113,shadowEnabled:!0}),n=t.scene,e=t.camera,a=t.renderer;this.scene=n,this.camera=e,this.renderer=a;var i=this.initStats(this.$refs.stats),o=[30,50,120,10,60];this.addPie(o),this.addLight(),this.listenMouseCover(),n.add(h);var r=this.addControl(),d=new THREE.Clock,c=function t(){s.update(),i.update();d.getDelta();r.update(),requestAnimationFrame(t),a.render(n,e)};c()},addAxes:function(){var t=this.initAxes(30);h.add(t)},addPie:function(t){var n=this,e=0;t.forEach(function(t){e+=t});var a={depth:.5,bevelThickness:1,bevelSize:0,bevelSegments:3,bevelEnabled:!0,curveSegments:12,steps:1},i=0,o=[3184853,6085855,16766546,16749684,14845387],s=["A","B","C","D","E"];t.forEach(function(t,d){var c=t/e,h=2*r*c,l=n.drawShape(0,h),f=n.initMaterial("MeshLambert",{color:o[d]}),p=new THREE.ExtrudeGeometry(l,a),v=new THREE.Mesh(p,f);v.rotation.z=i,v.castShadow=!0,v.receiveShadow=!0,v.dataInfo={name:s[d],percent:"".concat((100*c).toFixed(1),"%")},n.bindTween(v),u.add(v),i+=h}),u.rotation.x=-r/2,h.add(u)},addControl:function(){var t=this.initControls("Trackball",this.camera,{rotateSpeed:1,zoomSpeed:1,panSpeed:1});return t},addLight:function(){var t=new THREE.Group,n=this.initLight("Ambient",{color:15658734}),e=this.initTarget(0,0,0);t.add(e);var a=this.initLight("Directional",{color:15658734,intensity:.2,position:{x:10,y:20,z:10},castShadow:!0,shadow:{camera:{near:2,far:40,left:-15,right:15,top:15,bottom:-15},mapSize:{width:2048,height:2048}}});a.target=e,t.add(n),t.add(a),h.add(t)},drawShape:function(t,n){for(var e=Math.round((n-t)/(2*r)*200),a=[this.v2(0,0)],i=0;i<=e;i++){var o=10*d(n*i/e),s=10*c(n*i/e);a.push(this.v2(o,s))}var h=new THREE.Shape(a);return h},listenMouseCover:function(){var t=this,n=u.children,e=null,a=null;this.listenEvent("mousemove",this.camera,n,function(n,i){if(!n.length)return t.toggleInfo(!1,i,{}),void(e&&(e.tweenIn.stop(),e.tweenOut.start(),e=null));a=n[0].object,t.toggleInfo(!0,i,a.dataInfo),a!==e&&(e&&(e.tweenIn.stop(),e.tweenOut.start()),a.tweenOut.stop(),a.tweenIn.start(),e=a)})},bindTween:function(t){var n=500,e={z:t.position.z};function a(){t.isAnimating=!0}function i(n){t.position.z=n.z}function o(){t.isAnimating=!1}function r(){t.isAnimating=!1}t.isAnimating=!1;var d=new s.Tween(e).to({z:2.5},n).easing(s.Easing.Sinusoidal.InOut).onStart(a).onUpdate(i).onComplete(o).onStop(r);t.tweenIn=d;var c=new s.Tween(e).to({z:0},n).easing(s.Easing.Sinusoidal.InOut).onStart(a).onUpdate(i).onComplete(o).onStop(r);t.tweenOut=c},toggleInfo:function(t,n,e){var a=this.$refs.card;this.dataInfo=e;var i=n.clientX,o=n.clientY;a.style.top="".concat(o+20,"px"),a.style.left="".concat(i+20,"px"),a.style.opacity=t?1:0},test:function(t,n,e,a){var i,o,s=Math.max(t,e),r=Math.min(t,e),d=Math.max(n,a),c=Math.min(n,a),h=(s-r)/2+r,u=(d-c)/2+c,l=t-e,f=n-a;if(0===l)i=1,o=0;else if(0===f)o=1,i=0;else{o=1,i=-f/l;var p=Math.sqrt(Math.pow(i,2)+Math.pow(o,2));console.log(p),o/=p,i/=p}var v=3,w=h+v*i,m=u+v*o;console.log(w,m)}},mounted:function(){this.initWebGL(),this.test(1,3,2,1)}},f=l,p=(e("9820"),e("2877")),v=Object(p["a"])(f,a,i,!1,null,"3d8e6043",null);n["default"]=v.exports},9820:function(t,n,e){"use strict";var a=e("df3e"),i=e.n(a);i.a},df3e:function(t,n,e){}}]);
//# sourceMappingURL=chunk-7f9137ba.7395044a.js.map