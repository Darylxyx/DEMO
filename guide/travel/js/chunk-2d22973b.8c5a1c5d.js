(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22973b"],{de04:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("div",{ref:"canvas",attrs:{id:"WebGL-output"}})])},o=[],r=(i("7f7f"),i("42c5")),a=i("f383"),s=i("872c"),d=i("5176"),c=i.n(d),l=Math.PI,p=Math.cos,h=Math.sin,u=Math.random,y=Math.round,x=(Math.floor,{methods:{addMoveSec:function(){this.addFusion(),this.addAnalysis(),this.addProduct(),this.addService(),this.addOther()},addFusion:function(){for(var t=new THREE.Group,e=[0,-3,2,7],i=0;i<4;i++){var n=this.loadTexture("img/fusion_".concat(i+1,".png")),o=new THREE.SpriteMaterial({map:n}),r=new THREE.Sprite(o);r.scale.set(0===i?28:11,54,1),r.position.x=e[i],r.position.z=.01*(4-i),0!==i&&this.bindFusionAnim(r),t.add(r)}t.position.set(-23,-10,-1),this.mainGroup.add(t)},addAnalysis:function(){var t=this.addSingalSec("analysis",{x:43,y:43},{x:37,y:-12}),e=this.textSprite("数据建模分析",{textColor:"#DCDCDC",scale:30});e.position.y=-25,t.add(e);var i=this.addSatelite();t.add(i)},addProduct:function(){var t=this.addSingalSec("product",{x:25,y:25},{x:195,y:8}),e=this.addSingalSec("stage",{x:75,y:75},{x:195,y:-10});this.bindFloatAnim(t,2e3),this.productLineAnim(e)},addService:function(){var t=this.addSingalSec("cube",{x:41,y:41},{x:111,y:-4,z:1}),e=this.addSingalSec("aperture",{x:70,y:70},{x:111,y:-7}),i=(this.addSingalSec("lighting",{x:60,y:60},{x:110.4,y:-8,z:2}),this.textSprite("服务治理",{textColor:"#DCDCDC",scale:30}));i.position.y=-30,e.add(i),this.bindFloatAnim(t,3e3)},addSatelite:function(){for(var t=new THREE.Group,e=23,i=73,n=new THREE.SpriteMaterial({color:16777215,transparent:!0,map:this.loadTexture("img/point.png")}),o=[],r=0;r<4;r++){for(var a=new THREE.Group,s=new THREE.Geometry,d=0;d<=2*l;d+=2*l/i){var c=e*p(d),u=e*h(d),y=this.v3(c,u,0);s.vertices.push(y)}var x=this.initLine(s,{color:2093304});a.add(x);var f=a.rotation;switch(r){case 0:f.set(l/4,l/4,0);break;case 1:f.set(l/2,0,0);break;case 2:f.set(l/4*3,l/4*3,0);break;case 3:f.set(l,0,0);break;default:break}var v=new THREE.Sprite(n);v.scale.set(7,7,7);var m=x.geometry.vertices;v.position.set(m[0].x,m[0].y,m[0].z),o.push(v),a.add(v),t.add(a)}return this.bindSateliteAnim(o,t),t},bindFusionAnim:function(t){var e={x:t.position.x},i=this.createTween({start:e,end:{x:-8},easing:"InOut",duration:2e3,delay:500,repeat:1/0,yoyo:!0,onUpdate:function(e){t.position.x=e.x}});i.start()},bindSateliteAnim:function(t,e){var i=this,n=e.children,o=n[0].children[0].geometry.vertices;t.forEach(function(t,e){var n=c()({},o[0]),r=30*u()+20,a=o.map(function(e,o){if(0!==o){var a=e.x,s=e.y,d=e.z,c=i.createTween({start:n,end:{x:a,y:s,z:d},duration:r,onUpdate:function(e){t.position.set(e.x,e.y,e.z)}});return c}});a.shift(),a.forEach(function(t,e){var i=a[e+1];i?t.chain(i):t.chain(a[0])}),a[0].start()});var r=this.createTween({start:{r:0},end:{r:2*l},duration:5e3,repeat:1/0,onUpdate:function(t){e.rotation.x=t.r}});r.start()},bindFloatAnim:function(t,e){var i={y:t.position.y},n=this.createTween({start:i,end:{y:i.y+2},duration:e,onUpdate:function(e){t.position.y=e.y},repeat:1/0,yoyo:!0});n.start()},addOther:function(){for(var t=new THREE.Geometry,e=new THREE.Geometry,i=[{x:8,y:-10},{x:75,y:-10},{x:155,y:-10}],n=[{x:3,y:-16},{x:70,y:-16},{x:150,y:-16}],o=0;o<3;o++){var r=i[o];r.z=0;var a=n[o];a.z=0,t.vertices.push(r),e.vertices.push(a)}var s=this.addPoints(t,{r:197,g:29,b:202}),d=this.addPoints(e,{r:113,g:242,b:173});this.mainGroup.add(s),this.mainGroup.add(d);for(var c=this.loadTexture("img/cross_green.png"),l=this.loadTexture("img/cross_purple.png"),p=this.loadTexture("img/cross_yellow.png"),h=new THREE.SpriteMaterial({map:c}),x=new THREE.SpriteMaterial({map:l}),f=new THREE.SpriteMaterial({map:p}),v=[h,x,f],m=0;m<10;m++){var g=v[y(u()*(v.length-1))],C=new THREE.Sprite(g);C.scale.set(10,.8,1),C.position.x=-14,C.position.y=m%2===0?-10:-16,C.position.z=-100,this.bindCrossAnim(C),this.mainGroup.add(C)}},bindCrossAnim:function(t){var e=t.position.x,i={x:e},n=this.createTween({start:i,end:{x:e+200},duration:1e3*u()+2e3,delay:5e3*u(),onStart:function(){t.position.z=-1},onUpdate:function(e){t.position.x=e.x},onComplete:function(){i.x=e,t.position.z=-100}}),o=this.createTween({start:{},end:{},duration:20});n.chain(o),o.chain(n),n.start()},productLineAnim:function(t){for(var e=this,i=this.loadTexture("img/line1.png"),n=this.loadTexture("img/line2.png"),o=this.loadTexture("img/line3.png"),r=new THREE.SpriteMaterial({map:i}),a=new THREE.SpriteMaterial({map:n}),s=new THREE.SpriteMaterial({map:o}),d=[r,a,s],c=function(i){var n=d[i],o=new THREE.Sprite(n);o.scale.set(.73,10,1),o.position.set(14*(i-1),-5,-100);var r={y:-5},a=e.createTween({start:r,end:{y:300},duration:2e3,delay:1e3*u(),onStart:function(){o.position.z=-1},onUpdate:function(t){o.position.y=t.y},onComplete:function(t){r.y=-5,o.position.z=-100}}),s=e.createTween({start:{},end:{},duration:20});a.chain(s),s.chain(a),a.start(),t.add(o)},l=0;l<3;l++)c(l)}}}),f=Math.random,v=(Math.round,[{start:{x:-207.5,y:43},end:{x:-169,y:2},lineColor:"#1FF8B5",pointsColor:{r:31,g:248,b:181},shift:10},{start:{x:-207.5,y:15},end:{x:-169,y:-2.5},lineColor:"#1FF8B5",pointsColor:{r:31,g:248,b:181},shift:7},{start:{x:-207.5,y:-12.5},end:{x:-169,y:-7},lineColor:"#1FF8B5",pointsColor:{r:31,g:248,b:181},shift:-5},{start:{x:-207.5,y:-40},end:{x:-169,y:-11.5},lineColor:"#1FF8B5",pointsColor:{r:31,g:248,b:181},shift:-10},{start:{x:-207.5,y:-67.5},end:{x:-169,y:-16},lineColor:"#1FF8B5",pointsColor:{r:31,g:248,b:181},shift:-15},{start:{x:-103.5,y:17.5},end:{x:-91.5,y:-1},lineColor:"#CF6923",pointsColor:{r:207,g:105,b:35},shift:-8},{start:{x:-68,y:17.5},end:{x:-81,y:-1},lineColor:"#CF6923",pointsColor:{r:207,g:105,b:35},shift:8},{start:{x:-121,y:-45},end:{x:-92,y:-19},lineColor:"#CF6923",pointsColor:{r:207,g:105,b:35},shift:14},{start:{x:-86,y:-45},end:{x:-85.5,y:-19},lineColor:"#CF6923",pointsColor:{r:207,g:105,b:35},shift:6},{start:{x:-51,y:-45},end:{x:-79,y:-19},lineColor:"#CF6923",pointsColor:{r:207,g:105,b:35},shift:-14},{start:{x:-131.5,y:-10},end:{x:-33,y:-10},lineColor:"#1C82E9",pointsColor:{r:28,g:130,b:233},shift:0},{start:{x:-131.5,y:-6},end:{x:-33,y:-14},lineColor:"#1C82E9",pointsColor:{r:28,g:130,b:233},shift:0},{start:{x:-131.5,y:-14},end:{x:-33,y:-6},lineColor:"#1C82E9",pointsColor:{r:28,g:130,b:233},shift:0},{start:{x:-131.5,y:-19},end:{x:-33,y:-1},lineColor:"#1C82E9",pointsColor:{r:28,g:130,b:233},shift:0},{start:{x:-131.5,y:-1},end:{x:-33,y:-19},lineColor:"#1C82E9",pointsColor:{r:28,g:130,b:233},shift:0},{start:{x:-10,y:-13},end:{x:15,y:-13},lineColor:"#C51DCA",pointsColor:{r:197,g:29,b:202},shift:0},{start:{x:60,y:-13},end:{x:80,y:-13},lineColor:"#1FCBF8",pointsColor:{r:31,g:203,b:248},shift:0},{start:{x:140,y:-13},end:{x:158,y:-13},lineColor:"#20F8B5",pointsColor:{r:32,g:248,b:181},shift:0}]),m={methods:{drawLine:function(){var t=this,e={};v.forEach(function(i){var n;i.start.z=0,i.end.z=0;var o=t.countMid(i.start,i.end,i.shift),r=o.p1,a=o.p2;n=t.initBezier([i.start,r,a,i.end],{color:i.lineColor}),t.lineGroup.add(n),e[i.lineColor]||(e[i.lineColor]={lineList:[],rgb:i.pointsColor,isBezier:i.isBezier}),e[i.lineColor].lineList.push(n)}),this.addLineAnim(e)},countMid:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=this.calcVector(t,e),o=this.calcVectorLength(n),r=this.vectorUnit(n),a=.4*o,s=.7*o,d=this.vectorAdd(t,this.vectorNumMultiply(r,a)),c=this.vectorAdd(t,this.vectorNumMultiply(r,s)),l=this.vectorProduct(r,{x:0,y:0,z:-1},!0),p=this.vectorAdd(d,this.vectorNumMultiply(l,i)),h=this.vectorAdd(c,this.vectorNumMultiply(this.vectorNumMultiply(l,-.5),i));return{p1:p,p2:h}},addLineAnim:function(t){var e=this,i=function(i){var n=t[i],o=new THREE.Geometry,r=[];n.lineList.forEach(function(t){var e=(new THREE.Geometry).fromBufferGeometry(t.geometry);e.mergeVertices(),o.vertices.push(e.vertices[0]),r.push(e.vertices)});var a=e.addPoints(o,n.rgb);e.lineGroup.add(a),r.forEach(function(t,i){var n=[],o=c()({},t[0]),r=a.geometry.vertices[i],s=50*f()+50,d=1e3*f();t.forEach(function(t,i){if(0!==i){var o=t.x,d=t.y,c=t.z,l=e.createTween({start:r,end:{x:o,y:d,z:c},duration:s,onUpdate:function(){a.geometry.verticesNeedUpdate=!0}});n.push(l)}});var l=n[0],p=n[n.length-1];p.onComplete(function(){a.geometry.verticesNeedUpdate=!0,r.z=-100;window.setTimeout(function(){a.geometry.verticesNeedUpdate=!0,r.x=o.x,r.y=o.y,r.z=o.z,l.start()},d)}),n.forEach(function(t,e){if(e!==n.length-1){var i=n[e+1];t.chain(i)}}),l.start()})};for(var n in t)i(n)}}},g=(Math.PI,Math.cos,Math.sin,Math.floor,window),C=g.THREE,w=g.TWEEN,E={mixins:[a["a"],r["a"],s["a"],x,m],data:function(){return{sectionArr:[{id:"storage",name:"数据存储",position:{x:-103,y:32}},{id:"clean",name:"数据清洗",position:{x:-68,y:32}},{id:"exchange",name:"数据交换",position:{x:-121,y:-60}},{id:"directory",name:"数据目录",position:{x:-86,y:-60}},{id:"standard",name:"数据标准化",position:{x:-51,y:-60}}],mainGroup:new C.Group,lineGroup:new C.Group}},methods:{initWebGL:function(){var t=this.initBasics(this.$refs.canvas,{position:{x:0,y:0,z:0},antialias:!0},{clearColor:0,shadowEnabled:!0}),e=t.scene,i=t.camera,n=t.renderer;this.scene=e,this.camera=i,this.renderer=n,this.scene.add(this.mainGroup),this.mainGroup.add(this.lineGroup),this.resetCameraPosition(),function t(){w.update(),requestAnimationFrame(t),n.render(e,i)}(),this.addSource(),this.addTags(),this.addSection(),this.addCollector(),this.addSingalSec("transmit",{x:42,y:42},{x:-88,y:-10,z:.1}),this.addBackground(),this.addMoveSec(),this.drawLine()},addSource:function(){for(var t=new C.Group,e=this.loadTexture("img/source_success.png"),i=this.loadTexture("img/source_faild.png"),n=new C.SpriteMaterial({map:e}),o=(new C.SpriteMaterial({map:i}),48),r=27.5,a=0;a<5;a++){var s=n,d=new C.Sprite(s);d.scale.set(27,27,1);var c=o-a*r;d.position.set(-220,c,0),t.add(d);var l=this.world2screen(this.v3(-220,c,0),this.$refs.canvas);this.$store.commit("addGatherData",{type:"source",index:a+1,position:l})}this.mainGroup.add(t)},addTags:function(){for(var t=50,e=5,i=59,n=0;n<4;n++){var o=e+n*i,r=this.world2screen(this.v3(o,t,0),this.$refs.canvas);this.$store.commit("addGatherData",{type:"tags",index:n+1,position:r})}},addCollector:function(){for(var t=this.addSingalSec("collector",{x:60,y:60},{x:-152,y:-10,z:-.1}),e=this.loadTexture("img/collector-path.png"),i=new C.Geometry,n=0;n<16;n++){var o=1.5*n-8.2;i.vertices.push(this.v3(o,-10.05,-100))}var r=this.createPoints(i,{map:e,size:3,transparent:!0});t.add(r),function(){var t=null;(function e(i){window.clearTimeout(t);var n=r.geometry.vertices[i];r.geometry.verticesNeedUpdate=!0,n?(n.z=1,t=window.setTimeout(function(){e(i+1)},300)):(r.geometry.vertices.forEach(function(t){t.z=-100}),e(0))})(0)}()},addSingalSec:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new C.Group,o=this.loadTexture("img/".concat(t,".png")),r=new C.SpriteMaterial({map:o}),a=new C.Sprite(r);return a.scale.set(e.x,e.y,1),n.add(a),n.position.set(i.x,i.y,i.z||0),this.mainGroup.add(n),n},addSection:function(){var t=this,e=new C.Group;this.sectionArr.forEach(function(i){var n=new C.Group,o=t.loadTexture("img/".concat(i.id,".png")),r=new C.SpriteMaterial({map:o}),a=new C.Sprite(r);a.scale.set(30,30,1),n.add(a);var s=t.textSprite(i.name,{textColor:"#DCDCDC",scale:30});s.position.y=13,n.add(s);var d=i.position,c=d.x,l=d.y;n.position.set(c,l,1),e.add(n)}),this.mainGroup.add(e)}}},S=E,T=i("2877"),b=Object(T["a"])(S,n,o,!1,null,null,null);e["default"]=b.exports}}]);
//# sourceMappingURL=chunk-2d22973b.8c5a1c5d.js.map