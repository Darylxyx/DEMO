(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a9c76cd"],{1503:function(e,t,n){"use strict";var a=n("4257"),r=n.n(a);r.a},4257:function(e,t,n){},"469f":function(e,t,n){n("6c1c"),n("1654"),e.exports=n("7d7b")},"53e7":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{ref:"stats"}),n("div",{ref:"canvas",attrs:{id:"WebGL-output"}})])},r=[],o=(n("14b9"),n("c5f6"),n("28a5"),n("7f7f"),n("ac6a"),n("06db"),n("5df3"),n("795b")),i=n.n(o),c=n("5d73"),s=n.n(c),d=(n("55dd"),n("96cf"),n("3b8d")),u=n("bc3a"),h=n.n(u),l=n("ead3"),f=n.n(l),p=n("8992"),v=n("f383"),w=n("42c5"),g=n("1627"),b=window.THREE,m=window.TWEEN,x=Math.PI,y=100,k=(new b.Clock,new b.Group),j=new b.Group,M=new b.Group,z=new b.Group,C=new b.Group,G=new b.Group,L=new b.Group,E={mixins:[v["a"],w["a"]],data:function(){return{runCount:0,stopCount:0,offlineCount:0,isLoading:!1}},methods:{queryData:function(){var e=this;this.isLoading=!0;var t=h.a.create();t({method:"get",url:"/js/car.json",data:{}}).then(function(){var t=Object(d["a"])(regeneratorRuntime.mark(function t(n){var a,r,o,i,c,d,u,l,p,v,w,g,b,m,x,y;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:x=function(){C.children.forEach(function(e){e.children.forEach(function(e){e.tween&&e.tween.start()})})},b=function(e){return e.slice(0,Math.floor(e.length/7))},g=function(){var e=Math.random()-Math.random();return e},a=[],r=[],o=[],n=n.data,i=!0,c=!1,d=void 0,t.prev=10,u=s()(n);case 12:if(i=(l=u.next()).done){t.next=29;break}if(p=l.value,!p.geoHashKey){t.next=26;break}v=f.a.decode(p.geoHashKey),w=[v.lon,v.lat],t.t0=p.value,t.next=2===t.t0?20:1===t.t0?22:24;break;case 20:return a.push(w),t.abrupt("break",26);case 22:return r.push(w),t.abrupt("break",26);case 24:return o.push(w),t.abrupt("break",26);case 26:i=!0,t.next=12;break;case 29:t.next=35;break;case 31:t.prev=31,t.t1=t["catch"](10),c=!0,d=t.t1;case 35:t.prev=35,t.prev=36,i||null==u.return||u.return();case 38:if(t.prev=38,!c){t.next=41;break}throw d;case 41:return t.finish(38);case 42:return t.finish(35);case 43:return e.runCount=a.length,e.stopCount=r.length,a.sort(g),r.sort(g),o.sort(g),a=b(a),r=b(r),o=b(o),m=[{type:"run",data:a,color:1692048,rgbcolor:"rgba(25,209,144,1)",twinkle:!0},{type:"silence",data:r,color:2700494,rgbcolor:"rgba(41,52,206,1)"},{type:"offline",data:o,color:3160673,rgbcolor:"rgba(48,58,97,1)"}],t.next=54,e.drawTruck(m);case 54:x(),y=h.a.create(),y({method:"get",url:"/js/path.json",data:{}}).then(function(t){t=t.data.data.topLine100.slice(0,300),e.addPath(t)});case 57:case"end":return t.stop()}},t,null,[[10,31,35,43],[36,,38,42]])}));return function(e){return t.apply(this,arguments)}}())},drawTruck:function(e){var t=this;return new i.a(function(n){var a=e.map(function(e){var n=new i.a(function(n){C.add(t.drawPoints(e)),n()});return n});i.a.all(a).then(function(){n()})})},initWebGL:function(){var e=this.initBasics(this.$refs.canvas,{position:{x:-45,y:62,z:-140},antialias:!0},{clearColor:0}),t=e.scene,n=e.camera,a=e.renderer;this.scene=t,this.camera=n,this.renderer=a,this.scene.add(k),n.lookAt(this.v3(64,20,150)),this.addLight(),this.addSphere(),this.addBackground(),this.initMap();var r=function e(){m.update(),requestAnimationFrame(e),a.render(t,n)};r()},initMap:function(){var e=this;z.add(j),z.add(C),k.add(z),g["a"].forEach(function(t){j.add(e.drawMap(t.name,t.data))})},addAxes:function(){var e=this.initAxes(150);k.add(e)},addLight:function(){var e=new b.Group,t=this.initLight("Ambient",{color:6908265}),n=this.initLight("Directional",{color:16777215,position:{x:-500,y:250,z:-100},shadow:{camera:{near:2,far:2.5*y,left:2*-y,right:2*y,top:2*y,bottom:2*-y}}});e.add(t),e.add(n),k.add(e)},addControl:function(){var e=this.initControls("Trackball",this.camera,{rotateSpeed:1,zoomSpeed:1,panSpeed:1});return e},addSphere:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,a,r,o,i,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.initGeometry("Sphere",y,40,40),e.next=3,n.e("chunk-2d0b3298").then(n.t.bind(null,"26ca",7));case 3:a=e.sent,r=a.default,o=this.loadTexture(r),i=this.initMaterial("MeshPhong",{color:1647698}),i.map=o,c=new b.Mesh(t,i),c.scale.set(-1,-1,-1),c.rotation.y=x,M.add(c),z.add(M);case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),globalAnimate:function(){var e={y:0};function t(e){z.rotation.y=e.y}var n=new m.Tween(e).to({y:.1},2e4).onUpdate(t),a=new m.Tween(e).to({y:-.1},2e4).onUpdate(t);n.chain(a),a.chain(n),n.start()},addScanLine:function(){for(var e=0;e<8;e++){var t=this.initGeometry("Circle",y+.2,40,0,x),n=new b.LineBasicMaterial({color:16119285,opacity:e/14,transparent:!0}),a=new b.Line(t,n);a.rotation.x+=.02*e,G.add(a)}k.add(G)},scanAnimate:function(){G.rotation.x+=.02,G.rotation.x>=2*x&&(G.rotation.x=0)},addBackground:function(){for(var e=new b.Group,t=0;t<10;t++){for(var n=new b.Geometry,a=0;a<100;a++){var r=600*Math.random()-300,o=400*Math.random()-200,i=100,c=this.v3(r,o,i);n.vertices.push(c)}var s=this.createPoints(n,{map:null,color:16777215});this.bindTwinkle(s,{inTime:1e3,outTime:1e3,duration:3e3,delay:Math.floor(1e3*Math.random())}),s.tween.start(),e.add(s)}e.rotation.y=x/9,k.add(e)},drawMap:function(e,t){var n=this,a=[];t.forEach(function(e){e=e.indexOf(", ")>-1?e.split(", "):e.split(",");var t=Number(e[0]),r=e[1],o=n.lglt2xyx(t+90,r,y),i=o.x,c=o.y,s=o.z,d=n.v3(i,c,s);a.push(d)});var r=1332101,o=1,i=this.initLine(a,{color:r,linewidth:o,transparent:!0,opacity:.6});return i},drawPoints:function(e){var t=this,n=new b.Group,a=.15,r=[{pro:0,color:e.rgbcolor},{pro:.8,color:e.rgbcolor},{pro:1,color:"rgba(0, 0, 0, 1)"}];"run"===e.type&&(a=.3,r.splice(2,0,{pro:.81,color:"rgba(255,255,224, 1)"}));var o={size:a,depthTest:!1};if(e.twinkle){var i=100,c=this.splitArray(e.data,i);c.forEach(function(e){var a=new b.Geometry;e.forEach(function(e){var n=t.lglt2xyx(e[0]+90,e[1],y),r=n.x,o=n.y,i=n.z,c=t.v3(r,o,i);a.vertices.push(c)});var i=t.createPoints(a,o,r);t.bindTwinkle(i),n.add(i)})}else{var s=new b.Geometry;e.data.forEach(function(e){var n=t.lglt2xyx(e[0]+90,e[1],y),a=n.x,r=n.y,o=n.z,i=t.v3(a,r,o);s.vertices.push(i)});var d=this.createPoints(s,o,r);n.add(d)}return n},addPath:function(e){var t=this;e.forEach(function(e,n){var a=e.points.split(";"),r=a.map(function(e){e=e.split(",");var n=Number(e[0]),a=e[1],r=t.lglt2xyx(n+90,a,y+.1);return r});t.drawPath(r,n)})},drawPath:function(e,t){var n=new b.Geometry;e.forEach(function(e){n.vertices.push(e)});var a=new b.LineBasicMaterial({color:16766720,opacity:.2,transparent:!0}),r=new b.Line(n,a);L.add(r),this.drawPathFlow(e,t),z.add(L)},drawPathFlow:function(e,t){for(var n=e.length,a=Math.round(e.length/5),r=new b.Geometry,o=0;o<a;o++)r.vertices.push(this.v3(0,0,0));var i=[{pro:0,color:"rgba(255,215,0,1)"},{pro:.9,color:"rgba(255,255,255,0.5)"},{pro:1,color:"rgba(0,0,0,1)"}],c=.2;t<50?c=.3:t>=50&&t<200&&(c=.25);var s=this.createPoints(r,{color:16777215,size:c,depthTest:!1},i),d=this,u={index:0};function h(t){for(var n=Math.floor(t.index),r=[],o=n;o>n-a;o--)e[o]?r.push(e[o]):r.push(d.v3(500,500,500));s.geometry.vertices=r,s.geometry.verticesNeedUpdate=!0}function l(){u.index=0}var f=2e3,p=Math.floor(Math.random()*f*2),v=new m.Tween(u).to({index:n+a},f).delay(p).onUpdate(h).onComplete(l).repeat(1/0);L.add(s),v.start(),this.globalAnimate()},initGUI:function(){var e=this,t=new p["a"],n={cameraX:this.camera.position.x,cameraY:this.camera.position.y,cameraZ:this.camera.position.z,lookX:64,lookY:20,lookZ:150,fogFar:300},a=n.lookX,r=n.lookY,o=n.lookZ,i=function(){e.camera.lookAt(e.v3(a,r,o))};t.add(n,"cameraX",-200,200).onChange(function(t){e.camera.position.x=t}),t.add(n,"cameraY",-200,200).onChange(function(t){e.camera.position.y=t}),t.add(n,"cameraZ",-200,200).onChange(function(t){e.camera.position.z=t}),t.add(n,"lookX",-200,200).onChange(function(e){a=e,i()}),t.add(n,"lookY",-200,200).onChange(function(e){r=e,i()}),t.add(n,"lookZ",-200,200).onChange(function(e){o=e,i()}),t.add(n,"fogFar",0,2e3).onChange(function(t){e.scene.fog=new b.Fog(16777215,.015,t)})}},mounted:function(){this.initWebGL(),this.queryData()}},N=E,T=(n("1503"),n("2877")),P=Object(T["a"])(N,a,r,!1,null,"cc860a3a",null);t["default"]=P.exports},"5d73":function(e,t,n){e.exports=n("469f")},"7d7b":function(e,t,n){var a=n("e4ae"),r=n("7cd6");e.exports=n("584a").getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return a(t.call(e))}},ead3:function(e,t,n){"use strict";var a={base32:"0123456789bcdefghjkmnpqrstuvwxyz",encode:function(e,t,n){if("undefined"==typeof n){for(var r=1;r<=12;r++){var o=a.encode(e,t,r),i=a.decode(o);if(i.lat==e&&i.lon==t)return o}n=12}if(e=Number(e),t=Number(t),n=Number(n),isNaN(e)||isNaN(t)||isNaN(n))throw new Error("Invalid geohash");var c=0,s=0,d=!0,u="",h=-90,l=90,f=-180,p=180;while(u.length<n){if(d){var v=(f+p)/2;t>=v?(c=2*c+1,f=v):(c*=2,p=v)}else{var w=(h+l)/2;e>=w?(c=2*c+1,h=w):(c*=2,l=w)}d=!d,5==++s&&(u+=a.base32.charAt(c),s=0,c=0)}return u},decode:function(e){var t=a.bounds(e),n=t.sw.lat,r=t.sw.lon,o=t.ne.lat,i=t.ne.lon,c=(n+o)/2,s=(r+i)/2;return c=c.toFixed(Math.floor(2-Math.log(o-n)/Math.LN10)),s=s.toFixed(Math.floor(2-Math.log(i-r)/Math.LN10)),{lat:Number(c),lon:Number(s)}},bounds:function(e){if(0===e.length)throw new Error("Invalid geohash");e=e.toLowerCase();for(var t=!0,n=-90,r=90,o=-180,i=180,c=0;c<e.length;c++){var s=e.charAt(c),d=a.base32.indexOf(s);if(-1==d)throw new Error("Invalid geohash");for(var u=4;u>=0;u--){var h=d>>u&1;if(t){var l=(o+i)/2;1==h?o=l:i=l}else{var f=(n+r)/2;1==h?n=f:r=f}t=!t}}var p={sw:{lat:n,lon:o},ne:{lat:r,lon:i}};return p},adjacent:function(e,t){if(e=e.toLowerCase(),t=t.toLowerCase(),0===e.length)throw new Error("Invalid geohash");if(-1=="nsew".indexOf(t))throw new Error("Invalid direction");var n={n:["p0r21436x8zb9dcf5h7kjnmqesgutwvy","bc01fg45238967deuvhjyznpkmstqrwx"],s:["14365h7k9dcfesgujnmqp0r2twvyx8zb","238967debc01fg45kmstqrwxuvhjyznp"],e:["bc01fg45238967deuvhjyznpkmstqrwx","p0r21436x8zb9dcf5h7kjnmqesgutwvy"],w:["238967debc01fg45kmstqrwxuvhjyznp","14365h7k9dcfesgujnmqp0r2twvyx8zb"]},r={n:["prxz","bcfguvyz"],s:["028b","0145hjnp"],e:["bcfguvyz","prxz"],w:["0145hjnp","028b"]},o=e.slice(-1),i=e.slice(0,-1),c=e.length%2;return-1!=r[t][c].indexOf(o)&&""!==i&&(i=a.adjacent(i,t)),i+a.base32.charAt(n[t][c].indexOf(o))},neighbours:function(e){return{n:a.adjacent(e,"n"),ne:a.adjacent(a.adjacent(e,"n"),"e"),e:a.adjacent(e,"e"),se:a.adjacent(a.adjacent(e,"s"),"e"),s:a.adjacent(e,"s"),sw:a.adjacent(a.adjacent(e,"s"),"w"),w:a.adjacent(e,"w"),nw:a.adjacent(a.adjacent(e,"n"),"w")}}};e.exports&&(e.exports=a)}}]);
//# sourceMappingURL=chunk-1a9c76cd.e2672596.js.map