{"version":3,"sources":["webpack:///./src/views/Points.vue?1371","webpack:///src/views/Points.vue","webpack:///./src/views/Points.vue?a906","webpack:///./src/views/Points.vue","webpack:///./src/views/Points.vue?4699"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","attrs","id","staticRenderFns","TWEEN","window","PI","Math","Pointsvue_type_script_lang_js_","mixins","threeMixin","data","scene","camera","renderer","isAnimating","methods","initWebGL","_initWebGL","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","_this$initBasics","circle","controls","clock","renderScene","_this","wrap","_context","prev","next","initBasics","$refs","canvas","far","position","x","y","z","clearColor","fog","THREE","Fog","addGeom","addCircle","points","addPoints","listenEvent","target","movePoints","setTimeout","animateStart","addControls","Clock","update","rotation","delta","getDelta","requestAnimationFrame","stop","apply","arguments","geom","geometry","vertices","onUpdate","verticesNeedUpdate","forEach","v","tween","start","_this2","promise_default","a","resolve","reject","initGeometry","material","initMaterial","visible","Mesh","add","rdPoint","range","random","Geometry","num","length","i","_this$rdPoint","particle","v3","_vertices$i","dx","dy","dz","push","tweenInit","cloud","createPoints","set","_this3","duration","moveAnimate","type","_ref","to","delay","floor","Tween","easing","Easing","Sinusoidal","InOut","addAxes","axes","initAxes","initControls","rotateSpeed","zoomSpeed","panSpeed","mounted","views_Pointsvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Points_vue_vue_type_style_index_0_id_bf4ce8b8_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Points_vue_vue_type_style_index_0_id_bf4ce8b8_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-1570689c.517dfde2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{ref:\"stats\"}),_c('div',{ref:\"canvas\",attrs:{\"id\":\"WebGL-output\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <div ref='stats'></div>\n        <div ref='canvas' id='WebGL-output'></div>\n    </div>\n</template>\n<script>\n// import { GUI } from 'dat.gui';\n// import mixin from '../mixins/index';\nimport threeMixin from '../mixins/threeMixin';\n\nconst TWEEN = window.TWEEN;\nconst PI = Math.PI;\nexport default {\n    mixins: [threeMixin],\n    data() {\n        return {\n            scene: null,\n            camera: null,\n            renderer: null,\n            isAnimating: true\n        };\n    },\n    methods: {\n        async initWebGL() {\n            const {\n                scene,\n                camera,\n                renderer\n            } = this.initBasics(this.$refs.canvas, {far: 1000, position: {x: 0, y: 0, z: 400}}, {clearColor: 0x000000});\n            this.scene = scene;\n            this.camera = camera;\n            this.render = renderer;\n\n            // scene.fog = new THREE.FogExp2(0xffffff, 100);\n            scene.fog = new THREE.Fog(0xffffff, 0.015, 1000);\n\n            // this.addAxes(scene);\n\n            // const stats = this.initStats();\n\n            await this.addGeom();\n            // this.geom = this.addGeom();\n\n            const circle = this.addCircle();\n\n            this.points = this.addPoints();\n            // console.log(this.points);\n\n            this.listenEvent('click', camera, [circle], (target) => {\n                this.movePoints();\n            });\n\n            setTimeout(() => {\n                this.animateStart();\n                setTimeout(() => {\n                    this.isAnimating = false;\n                }, 1500);\n            }, 2000);\n\n            // 动画\n            const controls = this.addControls(camera);\n            const clock = new THREE.Clock();\n            const renderScene = () => {\n                // stats.update();\n                TWEEN.update();\n                this.points.rotation.y += 0.001;\n                const delta = clock.getDelta();\n                controls.update(delta);\n                requestAnimationFrame(renderScene);\n                renderer.render(scene, camera);\n            }\n\n            renderScene();\n        },\n        animateStart() {\n            const geom = this.points.geometry;\n            const vertices = geom.vertices;\n            function onUpdate() {\n                geom.verticesNeedUpdate = true;\n            }\n            vertices.forEach((v) => {\n                v.tween.onUpdate(onUpdate);\n                v.tween.start();\n            });\n        },\n        addGeom() {\n            return new Promise((resolve, reject) => {\n                const geom = this.initGeometry('Sphere', 110, 30, 30);\n                this.geom = geom;\n                resolve(geom);\n            });\n        },\n        addCircle() {\n            const material = this.initMaterial('MeshNormal', {visible: false});\n            const circle = new THREE.Mesh(this.geom, material);\n            this.scene.add(circle);\n            return circle;\n        },\n        rdPoint() {\n            const range = 800;\n            const x = Math.random() * range - range / 2;\n            const y = Math.random() * range - range / 2;\n            const z = Math.random() * range - range / 2;\n            return {x, y, z};\n        },\n        addPoints() { // 创建点\n            const points = new THREE.Geometry();\n            const vertices = this.geom.vertices;\n            const num = vertices.length;\n            for (let i = 0; i < num; i++) {\n                const {x, y, z} = this.rdPoint();\n                const particle = this.v3(x, y, z);\n                const {x: dx, y: dy, z: dz} = vertices[i];\n                const target = this.v3(dx, dy, dz);\n                points.vertices.push(particle);\n                points.vertices[i].tween = this.tweenInit(particle, target);\n            }\n            const cloud = this.createPoints(points);\n            cloud.rotation.set(PI/6, 0, PI/6);\n            this.scene.add(cloud);\n            return cloud;\n        },\n        movePoints() {\n            if (this.isAnimating) return;\n            this.isAnimating = true;\n            const duration = 1000;\n            const moveAnimate = (type) => { // 0:散开动画 1:聚合动画\n                const vertices = this.points.geometry.vertices;\n                vertices.forEach((v, i) => {\n                    const {x, y, z} = (type === 0) ? this.rdPoint() : this.geom.vertices[i];\n                    const particle = this.v3(x, y, z);\n                    v.tween.to(particle, duration);\n                });\n                this.animateStart();\n            };\n            moveAnimate(0);\n            setTimeout(() => {\n                moveAnimate(1);\n                setTimeout(() => {\n                    this.isAnimating = false;\n                }, duration * 1.5);\n            }, duration*1.5);\n        },\n        tweenInit(prev, next) {\n            const duration = 1000;\n            const delay = Math.floor(duration * Math.random() / 2);\n            const tween = new TWEEN.Tween(prev).to(next, duration);\n            tween.easing(TWEEN.Easing.Sinusoidal.InOut);\n            tween.delay(delay);\n            return tween;\n        },\n        addAxes(scene) {\n            const axes = this.initAxes(50);\n            scene.add(axes);\n        },\n        addControls(camera) { // 添加相机控制器\n            const controls = this.initControls('Trackball', camera, {\n                rotateSpeed: 1.0,\n                zoomSpeed: 1.0,\n                panSpeed: 1.0,\n                // noZoom: true,\n            });\n            return controls;\n        },\n    },\n    mounted() {\n        this.initWebGL();\n    },\n};\n</script>\n<style lang='less' scoped>\n#WebGL-output{\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Points.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Points.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Points.vue?vue&type=template&id=bf4ce8b8&scoped=true&\"\nimport script from \"./Points.vue?vue&type=script&lang=js&\"\nexport * from \"./Points.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Points.vue?vue&type=style&index=0&id=bf4ce8b8&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bf4ce8b8\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Points.vue?vue&type=style&index=0&id=bf4ce8b8&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Points.vue?vue&type=style&index=0&id=bf4ce8b8&lang=less&scoped=true&\""],"sourceRoot":""}