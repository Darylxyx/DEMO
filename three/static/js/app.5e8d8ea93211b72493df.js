webpackJsonp([1],{"/cpZ":function(t,e,a){var i=a("kdcS");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("7db1bca6",i,!0,{})},Ll3f:function(t,e,a){var i=a("bTTk");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("27d55eb4",i,!0,{})},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7+uW"),n=a("NYxO"),r=a("Dd8w"),o=a.n(r),s={updateUserInfo:function(t,e){t.userInfo?t.userInfo=o()({},t.userInfo,e):t.userInfo=o()({},e)},setTitle:function(t,e){t.title=e.title,t.titleType=e.type||"basic","connect"===e.type&&(t.connectProgress=e.progress)},setActCardList:function(t,e){t.actCardList=e},showPic:function(t,e){t.picIndex=e}},c=a("Xxa5"),d=a.n(c),l=a("exGp"),f=a.n(l),h={getUserInfo:function(t){var e=this;return f()(d.a.mark(function a(){var i;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.state.userInfo){e.next=2;break}return e.abrupt("return",t.state.userInfo);case 2:return e.next=4,window.$http.post("/v1/tos/index/vegaSend",{t:"json",m:"index",f:"userInfo"});case 4:return i=e.sent,t.commit("updateUserInfo",i),e.abrupt("return",i);case 7:case"end":return e.stop()}},a,e)}))()}};i.a.use(n.a);var m=new n.a.Store({state:{actCardList:[],title:"",titleType:"",connectProgress:"",picIndex:0},mutations:s,actions:h,getters:{}});window.store=m;var p={store:m,name:"App"},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var v=a("VU/8")(p,u,!1,function(t){a("qMCW")},"data-v-7754b6d2",null).exports,b=a("/ocq"),g=(a("+G5l"),a("vy4U")),w=a.n(g),x={computed:{title:function(){return this.$store.state.title},actCardList:function(){return this.$store.state.actCardList},titleType:function(){return this.$store.state.titleType},connectProgress:function(){return this.$store.state.connectProgress},currentTruck:function(){return this.truckNums[0]},currentTrailer:function(){return this.trailerNums[this.round%10]},picIndex:function(){return this.$store.state.picIndex}},methods:{formatWarn:function(){var t=this;setInterval(function(){t.leftWarns.forEach(function(e,a){var i=Math.round(t.leftList[a].num/24/30);e.num=e.num+i})},1e4+1e4*Math.random())},formatCount:function(t){var e=this;setInterval(function(){e.bottomList.forEach(function(t){var e=Math.random()>.4?1:-1;t.num=parseInt(t.num+e*Math.random()*5)})},1e4)},makeLeftWarns:function(){var t=this,e=(new Date).getHours()+1;this.leftList.forEach(function(a){var i=a;i.num=Math.round(a.num/24*e),t.leftWarns.push(i)})},formatter:function(t){return t.toFixed(1)},formattime:function(t){var e=Math.floor(t/60/60).toFixed(0).padStart(2,"0");return e+":"+Math.max((t-3600*e)/60,0).toFixed(0).padStart(2,"0")+":"+(t%60).toFixed(0).padStart(2,"0")}},data:function(){return{leftWarns:[],leftList:[{icon:"static/img/icon1.png",num:309,desc:"头挂匹配"},{icon:"static/img/icon2.png",num:206,desc:"头挂分离"},{icon:"static/img/icon4.png",num:784,desc:"进入场站"},{icon:"static/img/icon3.png",num:776,desc:"停靠月台"},{icon:"static/img/icon5.png",num:21,desc:"防侧翻保护"},{icon:"static/img/icon6.png",num:1633,desc:"胎压异常"},{icon:"static/img/icon7.png",num:0,desc:"胎温异常"},{icon:"static/img/icon8.png",num:2,desc:"轮胎漏气"}],bottomList:[{num:1850,desc:"运行中"},{num:761,desc:"静止中"},{num:353,desc:"离线中"},{num:211,desc:"装货中"},{num:134,desc:"卸货中"}],truckNums:["沪AD9832"],trailerNums:["沪GD889挂","沪F7T73挂","沪D9C73挂","沪D9C79挂","沪D9C81挂","沪D9C02挂","沪D9C46挂","沪D9C02挂","沪D9C66挂","沪D9C58挂"],round:0}},mounted:function(){this.makeLeftWarns(),this.formatCount(),this.formatWarn(),window.$$vue=this}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"board"},[a("div",{staticClass:"title-bar"},["basic"===t.titleType?a("p",{staticClass:"title-basic"},[t._v(t._s(t.title))]):t._e(),t._v(" "),"connect"===t.titleType?a("div",{staticClass:"title-connect"},[a("div",{staticClass:"title-connect-text"},[a("span",[t._v("挂车："+t._s(t.currentTrailer))]),t._v(" "),a("span",{staticClass:"main"},[t._v(t._s(t.title))]),t._v(" "),a("span",[t._v("车头："+t._s(t.currentTruck))])]),t._v(" "),a("div",{staticClass:"progress"},[a("div",{staticClass:"left",style:{width:t.connectProgress/2+1+"%"}}),t._v(" "),a("div",{staticClass:"right",style:{width:t.connectProgress/2+1+"%"}})])]):t._e()]),t._v(" "),a("div",{staticClass:"left-bar"},t._l(t.leftWarns,function(e){return a("div",{staticClass:"left-sec"},[a("img",{staticClass:"icon",attrs:{src:e.icon}}),t._v(" "),a("div",[a("p",{staticClass:"num"},[t._v(t._s(e.num))]),t._v(" "),a("p",{staticClass:"desc"},[t._v(t._s(e.desc))])])])})),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"bottom-bar"},t._l(t.bottomList,function(e){return a("div",{staticClass:"bottom-sec"},[a("p",{staticClass:"num"},[t._v(t._s(e.num)),a("span",{staticClass:"unit"},[t._v("辆")])]),t._v(" "),a("p",{staticClass:"desc"},[t._v(t._s(e.desc))])])})),t._v(" "),a("div",{staticClass:"card-group"},[a("div",{staticClass:"card card-blue card-stop",class:{"card-active":t.actCardList.indexOf("stop")>-1}},[a("span",{staticClass:"card-title"},[t._v("园区停靠")]),t._v(" "),t._m(1),t._v(" "),a("hr",{staticClass:"card-t"}),t._v(" "),a("hr",{staticClass:"card-l"}),t._v(" "),a("hr",{staticClass:"card-r"}),t._v(" "),a("hr",{staticClass:"card-b"}),t._v(" "),a("hr",{staticClass:"card-br"})]),t._v(" "),a("div",{staticClass:"card card-blue card-stop",class:{"card-active":t.actCardList.indexOf("unloadstop")>-1}},[a("span",{staticClass:"card-title"},[t._v("园区停靠")]),t._v(" "),t._m(2),t._v(" "),a("hr",{staticClass:"card-t"}),t._v(" "),a("hr",{staticClass:"card-l"}),t._v(" "),a("hr",{staticClass:"card-r"}),t._v(" "),a("hr",{staticClass:"card-b"}),t._v(" "),a("hr",{staticClass:"card-br"})]),t._v(" "),a("div",{staticClass:"card card-blue card-stop",class:{"card-active":t.actCardList.indexOf("location")>-1}},[a("span",{staticClass:"card-title"},[t._v("高精度定位")]),t._v(" "),a("p",{staticClass:"con"},[t._v("高精度定位成功")]),t._v(" "),a("hr",{staticClass:"card-t"}),t._v(" "),a("hr",{staticClass:"card-l"}),t._v(" "),a("hr",{staticClass:"card-r"}),t._v(" "),a("hr",{staticClass:"card-b"}),t._v(" "),a("hr",{staticClass:"card-br"})]),t._v(" "),a("div",{staticClass:"card card-blue card-stop",class:{"card-active":t.actCardList.indexOf("platform")>-1}},[a("span",{staticClass:"card-title"},[t._v("月台匹配")]),t._v(" "),a("p",{staticClass:"con"},[t._v("月台匹配成功")]),t._v(" "),a("hr",{staticClass:"card-t"}),t._v(" "),a("hr",{staticClass:"card-l"}),t._v(" "),a("hr",{staticClass:"card-r"}),t._v(" "),a("hr",{staticClass:"card-b"}),t._v(" "),a("hr",{staticClass:"card-br"})]),t._v(" "),t.actCardList.indexOf("load")>-1?a("div",{staticClass:"card-active card card-blue card-load"},[a("span",{staticClass:"card-title"},[t._v("实时装货...")]),t._v(" "),a("p",{staticClass:"con"},[a("animate-number",{staticStyle:{"margin-left":"0"},attrs:{from:"0",to:"15",duration:"11000",formatter:t.formatter}}),t._v(" t\n                "),a("span",[a("animate-number",{staticStyle:{"margin-left":"0"},attrs:{from:"0",to:"48",duration:"11000",formatter:t.formatter}}),t._v(" m³")],1)],1),t._v(" "),a("hr",{staticClass:"card-t"}),t._v(" "),a("hr",{staticClass:"card-l"}),t._v(" "),a("hr",{staticClass:"card-r"}),t._v(" "),a("hr",{staticClass:"card-b"}),t._v(" "),a("hr",{staticClass:"card-br"})]):t._e(),t._v(" "),t.actCardList.indexOf("loadtime")>-1?a("div",{staticClass:"card-active card card-blue card-loadtime"},[a("span",{staticClass:"card-title"},[t._v("装货时长")]),t._v(" "),a("p",{staticClass:"con"},[a("animate-number",{staticStyle:{"margin-left":"0"},attrs:{from:"1",to:"11304",duration:"11000",formatter:t.formattime}})],1),t._v(" "),a("hr",{staticClass:"card-t"}),t._v(" "),a("hr",{staticClass:"card-l"}),t._v(" "),a("hr",{staticClass:"card-r"}),t._v(" "),a("hr",{staticClass:"card-b"}),t._v(" "),a("hr",{staticClass:"card-br"})]):t._e(),t._v(" "),t.actCardList.indexOf("unload")>-1?a("div",{staticClass:"card-active card card-red card-unload"},[a("span",{staticClass:"card-title"},[t._v("实时卸货...")]),t._v(" "),a("p",{staticClass:"con"},[a("animate-number",{staticStyle:{"margin-left":"0"},attrs:{from:"15",to:"0",duration:"11000",formatter:t.formatter}}),t._v(" t\n                "),a("span",[a("animate-number",{staticStyle:{"margin-left":"0"},attrs:{from:"48",to:"0",duration:"11000",formatter:t.formatter}}),t._v(" m³")],1)],1),t._v(" "),a("hr",{staticClass:"card-t"}),t._v(" "),a("hr",{staticClass:"card-l"}),t._v(" "),a("hr",{staticClass:"card-r"}),t._v(" "),a("hr",{staticClass:"card-b"}),t._v(" "),a("hr",{staticClass:"card-br"})]):t._e(),t._v(" "),t.actCardList.indexOf("unloadtime")>-1?a("div",{staticClass:"card-active card card-red card-unloadtime"},[a("span",{staticClass:"card-title"},[t._v("卸货时长")]),t._v(" "),a("p",{staticClass:"con"},[a("animate-number",{staticStyle:{"margin-left":"0"},attrs:{from:"1",to:"9796",duration:"11000",formatter:t.formattime}})],1),t._v(" "),a("hr",{staticClass:"card-t"}),t._v(" "),a("hr",{staticClass:"card-l"}),t._v(" "),a("hr",{staticClass:"card-r"}),t._v(" "),a("hr",{staticClass:"card-b"}),t._v(" "),a("hr",{staticClass:"card-br"})]):t._e(),t._v(" "),a("div",{staticClass:"card card-blue card-temp",class:{"card-active":t.actCardList.indexOf("temp")>-1}},[a("span",{staticClass:"card-title"},[t._v("车厢温度")]),t._v(" "),t._m(3),t._v(" "),a("hr",{staticClass:"card-t"}),t._v(" "),a("hr",{staticClass:"card-l"}),t._v(" "),a("hr",{staticClass:"card-r"}),t._v(" "),a("hr",{staticClass:"card-b"}),t._v(" "),a("hr",{staticClass:"card-br"})]),t._v(" "),a("div",{staticClass:"card card-blue card-weight",class:{"card-active":t.actCardList.indexOf("weight")>-1}},[a("span",{staticClass:"card-title"},[t._v("挂车载重")]),t._v(" "),t._m(4),t._v(" "),a("hr",{staticClass:"card-t"}),t._v(" "),a("hr",{staticClass:"card-l"}),t._v(" "),a("hr",{staticClass:"card-r"}),t._v(" "),a("hr",{staticClass:"card-b"}),t._v(" "),a("hr",{staticClass:"card-br"})]),t._v(" "),a("div",{staticClass:"card card-red card-wheel",class:{"card-active":t.actCardList.indexOf("wheel")>-1}},[a("span",{staticClass:"card-title"},[t._v("胎温胎压")]),t._v(" "),t._m(5),t._v(" "),a("hr",{staticClass:"card-t"}),t._v(" "),a("hr",{staticClass:"card-l"}),t._v(" "),a("hr",{staticClass:"card-r"}),t._v(" "),a("hr",{staticClass:"card-b"}),t._v(" "),a("hr",{staticClass:"card-br"})]),t._v(" "),a("div",{staticClass:"card card-red card-wheelalert",class:{"card-active":t.actCardList.indexOf("wheelalert")>-1}},[a("span",{staticClass:"card-title"},[t._v("事件报警")]),t._v(" "),t._m(6),t._v(" "),a("hr",{staticClass:"card-t"}),t._v(" "),a("hr",{staticClass:"card-l"}),t._v(" "),a("hr",{staticClass:"card-r"}),t._v(" "),a("hr",{staticClass:"card-b"}),t._v(" "),a("hr",{staticClass:"card-br"})]),t._v(" "),a("div",{staticClass:"card card-red card-rollalert",class:{"card-active":t.actCardList.indexOf("rollalert")>-1}},[a("span",{staticClass:"card-title"},[t._v("事件报警")]),t._v(" "),t._m(7),t._v(" "),a("hr",{staticClass:"card-t"}),t._v(" "),a("hr",{staticClass:"card-l"}),t._v(" "),a("hr",{staticClass:"card-r"}),t._v(" "),a("hr",{staticClass:"card-b"}),t._v(" "),a("hr",{staticClass:"card-br"})]),t._v(" "),a("div",{staticClass:"card card-img img-1",class:{"card-active":1===t.picIndex}},[a("img",{attrs:{src:"static/img/gua1.png"}})]),t._v(" "),a("div",{staticClass:"card card-img img-2",class:{"card-active":2===t.picIndex}},[a("img",{attrs:{src:"static/img/gua2.png"}})]),t._v(" "),a("div",{staticClass:"card card-img img-3",class:{"card-active":3===t.picIndex}},[a("img",{attrs:{src:"static/img/gua3.png"}})])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"right-bar"},[a("div",{staticClass:"right-top"},[a("div",{staticClass:"right-top-left"},[a("p",{staticClass:"num"},[t._v("2964辆")]),t._v(" "),a("p",{staticClass:"desc"},[t._v("智能挂车")]),t._v(" "),a("p",{staticClass:"num"},[t._v("89%")]),t._v(" "),a("p",{staticClass:"desc"},[t._v("平均体积装载率")]),t._v(" "),a("p",{staticClass:"num"},[t._v("3.2小时")]),t._v(" "),a("p",{staticClass:"desc"},[t._v("平均装货时长")])]),t._v(" "),a("div",{staticClass:"right-top-right"},[a("p",{staticClass:"num"},[t._v("146家")]),t._v(" "),a("p",{staticClass:"desc"},[t._v("智能挂客户")]),t._v(" "),a("p",{staticClass:"num"},[t._v("73%")]),t._v(" "),a("p",{staticClass:"desc"},[t._v("平均重量装载率")]),t._v(" "),a("p",{staticClass:"num"},[t._v("2.4小时")]),t._v(" "),a("p",{staticClass:"desc"},[t._v("平均卸货时长")])])]),t._v(" "),a("div",{staticClass:"right-middle"},[a("div",{staticClass:"sub-title"},[a("span",[t._v("车辆类型")]),t._v(" "),a("hr")]),t._v(" "),a("div",{staticClass:"right-middle-left"},[a("div",{staticClass:"middle-sec"},[a("div",{staticClass:"icon"},[t._v("厢")]),t._v(" "),a("p",{staticClass:"desc"},[a("span",{staticClass:"num"},[t._v("2312辆")])])]),t._v(" "),a("div",{staticClass:"middle-sec"},[a("div",{staticClass:"icon"},[t._v("冷")]),t._v(" "),a("p",{staticClass:"desc"},[a("span",{staticClass:"num"},[t._v("119辆")])])]),t._v(" "),a("div",{staticClass:"middle-sec"},[a("div",{staticClass:"icon"},[t._v("轿")]),t._v(" "),a("p",{staticClass:"desc"},[a("span",{staticClass:"num"},[t._v("533辆")])])])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"con"},[this._v("停靠位置"),e("span",[this._v("B04")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"con"},[this._v("停靠位置"),e("span",[this._v("E11")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"con"},[e("img",{attrs:{src:"static/img/icon10.png"}}),this._v(" "),e("hr",{staticClass:"split"}),this._v(" "),e("div",[e("p",[this._v("压缩机"),e("span",[this._v("打开")])]),this._v(" "),e("p",[this._v("温度"),e("span",[this._v("正常")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"con"},[e("img",{attrs:{src:"static/img/icon11.png"}}),this._v(" "),e("hr",{staticClass:"split"}),this._v(" "),e("div",[e("p",[this._v("体积"),e("span",[this._v("48 m³")])]),this._v(" "),e("p",[this._v("载重"),e("span",[this._v("15 t")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"con"},[e("img",{attrs:{src:"static/img/icon12.png"}}),this._v(" "),e("hr",{staticClass:"split"}),this._v(" "),e("div",[e("p",[this._v("胎温"),e("span",[this._v("正常")])]),this._v(" "),e("p",[this._v("胎压"),e("span",[this._v("过高")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"con"},[e("img",{attrs:{src:"static/img/icon12.png"}}),this._v(" "),e("hr",{staticClass:"split"}),this._v(" "),e("div",[e("p",[this._v("12:15:32")]),this._v(" "),e("p",[this._v("胎压报警")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"con"},[e("img",{attrs:{src:"static/img/icon9.png"}}),this._v(" "),e("hr",{staticClass:"split"}),this._v(" "),e("div",[e("p",[this._v("12:32:54")]),this._v(" "),e("p",[this._v("防侧翻保护")])])])}]};var _=a("VU/8")(x,C,!1,function(t){a("/cpZ"),a("NjGp")},"data-v-7297fede",null).exports,y=a("Gu7T"),k=a.n(y),T=a("woOf"),z=a.n(T),L=a("pFYg"),E=a.n(L),S=a("fZjL"),G=a.n(S),M=a("od15"),P=a.n(M),R=(a("EJtI"),window.THREE),$=["position","rotation","scale"];function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments[2];G()(e).forEach(function(i){var n=e[i];if($.indexOf(i)>-1)t[i].set(n.x,n.y,n.z);else if("color"!==i){var r=void 0;a?(t[a]||(t[a]={}),r=t[a]):r=t,"object"===(void 0===n?"undefined":E()(n))?I(r,n,i):r[i]=n}else t[i]=new R.Color(n)})}var H={methods:{initBasics:function(t,e,a){var i=t.offsetWidth,n=t.offsetHeight,r=new R.Scene,o={fov:50,near:.1,far:1e3,aspect:i/n,position:{x:-30,y:40,z:30},antialias:!1},s=z()(o,e),c=new R.PerspectiveCamera(s.fov,s.aspect,s.near,s.far);c.position.set(s.position.x,s.position.y,s.position.z),c.lookAt(r.position);var d=new R.WebGLRenderer({antialias:s.antialias}),l=z()({clearColor:15658734,shadowEnabled:!1},a);return d.setSize(i,n),d.setClearColor(l.clearColor),d.shadowMap.enabled=l.shadowEnabled,t.appendChild(d.domElement),d.render(r,c),this.listenResize(t,c,d),{scene:r,camera:c,renderer:d}},initAxes:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return new R.AxesHelper(t)},initStats:function(t){var e=new P.a,a=e.domElement;return e.setMode(0),a.style.position="absolute",a.style.left="0",a.style.top="0",t.appendChild(a),e},initLight:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t+"Light";if(this.constructorCheck(a)){var i=new R[a];return I(i,e),i}},initMaterial:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t+"Material";if(this.constructorCheck(a)){var i=new R[a];return I(i,e),i}},initGeometry:function(t){var e=t+"Geometry";if(this.constructorCheck(e)){for(var a=arguments.length,i=Array(a>1?a-1:0),n=1;n<a;n++)i[n-1]=arguments[n];return new(Function.prototype.bind.apply(R[e],[null].concat(k()(i))))}},initLine:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments[2],i=new R.Geometry;t.forEach(function(t){i.vertices.push(t)});var n=void 0;n=a?new R.LineDashedMaterial(e):new R.LineBasicMaterial(e);var r=new R.Line(i,n);return a&&r.computeLineDistances(),r},initTarget:function(t,e,a){var i=new R.Object3D;return i.position.set(t,e,a),i},v2:function(t,e){return new R.Vector2(t,e)},v3:function(t,e,a){return new R.Vector3(t,e,a)},f3:function(t,e,a){return new R.Face3(t,e,a)},color:function(t){return new R.Color(t)},listenResize:function(t,e,a){window.addEventListener("resize",function(){var i=t.offsetWidth,n=t.offsetHeight;e.aspect=i/n,e.updateProjectionMatrix(),a.setSize(i,n)},!1)},constructorCheck:function(t){var e=!0;return"function"!=typeof R[t]&&(console.warn("THREE."+t+" is not a constructor."),e=!1),e},createMultiMaterialObject:function(t,e){for(var a=new R.Group,i=0,n=e.length;i<n;i++)a.add(new R.Mesh(t,e[i]));return a},initControls:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t+"Controls";if(this.constructorCheck(i)){var n=new R[i](e);return I(n,a),n}},listenEvent:function(t,e,a,i){document.addEventListener(t,function(t){var n=new R.Vector3(t.clientX/window.innerWidth*2-1,-t.clientY/window.innerHeight*2+1,.5);n=n.unproject(e);var r=new R.Raycaster(e.position,n.sub(e.position).normalize()).intersectObjects(a);i&&i(r,t)},!1)},loadTexture:function(t){return(new R.TextureLoader).load(t)},createPoints:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i={color:16777215,size:1,map:this.generateSprite(a),transparent:!0};(e=z()({},i,e)).map&&(e.blending=R.AdditiveBlending);var n=new R.PointsMaterial(e),r=new R.Points(t,n);return r.sortParticles=!0,r},generateSprite:function(t){var e=document.createElement("canvas");e.width=32,e.height=32;var a=e.getContext("2d"),i=a.createRadialGradient(e.width/2,e.height/2,0,e.width/2,e.height/2,e.width/2);(t.length?t:[{pro:0,color:"rgba(255,255,255,1)"},{pro:.9,color:"rgba(255,255,255,1)"},{pro:1,color:"rgba(0,0,0,1)"}]).forEach(function(t){i.addColorStop(t.pro,t.color)}),a.fillStyle=i,a.fillRect(0,0,e.width,e.height);var n=new R.Texture(e);return n.needsUpdate=!0,n},bindTwinkle:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={opacity:0},i={inTime:500,duration:0,outTime:1e3,delay:Math.floor(3e3*Math.random())};function n(){t.material&&(t.material.opacity=this.opacity)}e=z()({},i,e);var r=new w.a.Tween(a).to({opacity:1},e.inTime).easing(w.a.Easing.Sinusoidal.InOut).delay(e.delay).onUpdate(n),o=new w.a.Tween(a).to({opacity:0},e.outTime).easing(w.a.Easing.Sinusoidal.InOut).delay(e.duration).onUpdate(n);r.chain(o),o.chain(r),t.tween=r,t.tweenBack=o},textSprite:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=z()({},{canvasWidth:128,canvasHeight:128,fontFace:"Arial",fontSize:20,scale:5,borderThickness:4,textColor:"#000000"},e),console.log(e.textColor);var a=document.createElement("canvas");a.width=e.canvasWidth,a.height=e.canvasHeight,a.style.width=e.canvasWidth/2+"px",a.style.height=e.canvasHeight/2+"px";var i=a.getContext("2d");i.font=e.fontSize+"px "+e.fontFace,i.lineWidth=e.borderThickness,i.fillStyle=e.textColor,console.log(i.fillStyle),i.textAlign="center",i.fillText(t,a.width/2,a.height/2+e.fontSize/2.5);var n=new R.Texture(a);n.needsUpdate=!0;var r=new R.SpriteMaterial({map:n}),o=new R.Sprite(r);return o.scale.set(e.scale,e.scale,e.scale),o}}},U=null,W=Math.PI,O=Math.sin,A=Math.cos,j={x:0,y:15,z:10},F={methods:{initAnimate:function(){(U=this.truckGroup).add(this.headGroup),U.rotation.y=-W/2,U.position.x=-75,this.backGroup.position.x=-85,this.backGroup.rotation.y=-W/2,this.mainGroup.add(this.backGroup),this.camera.position.set(-80,15,10),this.camera.lookAt(this.v3(-80,0,0));var t=this.truckCombine();this.firstAnimate=t.begin;var e=this.outStation();t.begin.chain(e.begin);var a=this.inLoad();e.end.chain(a.begin);var i=this.reversInLoad();a.end.chain(i.begin);var n=this.loading();i.end.chain(n.begin);var r=this.outLoad();n.end.chain(r.begin);var o=this.inCurve();r.end.chain(o.begin);var s=this.reversInUnload();o.end.chain(s.begin);var c=this.unloading();s.end.chain(c.begin);var d=this.outUnload();c.end.chain(d.begin);var l=this.inStation();d.end.chain(l.begin);var f=this.resetStart();l.end.chain(f.begin),f.end.chain(t.begin)},animateStart:function(){this.firstAnimate.start()},truckCombine:function(){var t=this,e={x:-75};return{begin:new w.a.Tween(e).to({x:-85},6e3).onStart(function(){t.signal1.position.set(0,-.7,-5.2),t.signal2.position.set(-1,-.9,-4.8),t.signal3.position.set(1,-.9,-4.8),t.signal1.tween.start(),t.signal2.tween.start(),t.signal3.tween.start()}).onUpdate(function(){U.position.x=this.x;var e=Math.abs(U.position.x+75)/10*100;t.$store.commit("setTitle",{title:"接挂",type:"connect",progress:e})}).onComplete(function(){e.x=-75,t.mainGroup.remove(t.backGroup),t.backGroup.position.x=0,U.add(t.backGroup),t.backGroup.rotation.y=0,t.signal1.tween.stop(),t.signal2.tween.stop(),t.signal3.tween.stop(),t.$store.commit("setTitle",{title:"任务开始"})}).delay(3e3)}},outStation:function(){var t=this,e={x:-85},a=new w.a.Tween(e).to({x:-80},2e3).onUpdate(function(){U.position.x=this.x,t.moveCamera()}).onComplete(function(){e.x=-85}),i={y:15},n=new w.a.Tween(i).to({y:30},1e3).onUpdate(function(){j.y=this.y,t.moveCamera()}).onComplete(function(){i.y=15});n.chain(a);var r={rad:W/2},o=new w.a.Tween(r).to({rad:0},2e3).onUpdate(function(){t.drift(10,this.rad,-80,10,!0),t.moveCamera()}).onComplete(function(){t.$store.commit("setTitle",{}),r.rad=W/2});a.chain(o);var s={z:10},c=new w.a.Tween(s).to({z:42},3e3).onUpdate(function(){U.position.z=this.z,t.moveCamera()}).onComplete(function(){s.z=10});return o.chain(c),{begin:n,end:c}},inLoad:function(){var t=this,e={rad:W},a=new w.a.Tween(e).to({rad:W/2*3},2e3).onUpdate(function(){t.drift(15,this.rad,-55,42),t.moveCamera()}).onComplete(function(){e.rad=W}),i={x:-55},n=new w.a.Tween(i).to({x:11},4e3).onUpdate(function(){U.position.x=this.x,t.moveCamera()}).onComplete(function(){i.x=-55});return a.chain(n),{begin:a,end:n}},reversInLoad:function(){var t=this,e={rad:W/2},a=new w.a.Tween(e).to({rad:W},2e3).onStart(function(){t.signal2.position.set(0,.9,0),t.signal2.tween.start()}).onUpdate(function(){t.drift(11,this.rad,11,68,!0),t.moveCamera()}).onComplete(function(){e.rad=W/2}),i={z:68},n=new w.a.Tween(i).to({z:77.4},3e3).onUpdate(function(){U.position.z=this.z,t.moveCamera()}).onComplete(function(){i.z=68});return a.chain(n),{begin:a,end:n}},loading:function(){var t=this,e=new w.a.Tween({}).to({},4e3).onStart(function(){t.$store.commit("setActCardList",["location"])}),a=new w.a.Tween({}).to({},4e3).onStart(function(){t.loadMatchSpace.tween.start(),t.$store.commit("setActCardList",["platform"])});e.chain(a);var i=new w.a.Tween({}).to({},1e3).onStart(function(){t.signal2.tween.stop(),t.loadMatchSpace.tween.stop(),t.$store.commit("setTitle",{title:"园区停靠"}),t.$store.commit("setActCardList",["stop"])});a.chain(i);var n={x:0,y:30,z:87.4},r=new w.a.Tween(n).to({x:4,y:5,z:100},1e3).onUpdate(function(){t.moveCamera(this.x,this.y,this.z)}).onComplete(function(){n={x:0,y:30,z:87.4}});i.chain(r);var o={x:4,y:5,z:100},s=new w.a.Tween(o).to({x:4,y:8,z:82.4},1e3).onUpdate(function(){t.moveCamera(this.x,this.y,this.z)}).onComplete(function(){o={x:4,y:5,z:100}}).delay(1e3);r.chain(s);var c=new w.a.Tween({}).to({},12e3).onStart(function(){t.$store.commit("setTitle",{title:"装货"}),t.$store.commit("setActCardList",["load","loadtime"]),t.goodsList.forEach(function(e,a){e.inTween.start(),30===a?e.inTween.onComplete(function(){t.$store.commit("showPic",1)}):100===a?e.inTween.onComplete(function(){t.$store.commit("showPic",2)}):170===a&&e.inTween.onComplete(function(){t.$store.commit("showPic",3)})})}).onComplete(function(){t.$store.commit("showPic",0)});return s.chain(c),{begin:e,end:c}},outLoad:function(){var t=this,e={z:77.4},a=new w.a.Tween(e).to({z:70},3e3).onStart(function(){t.$store.commit("setTitle",{}),t.$store.commit("setActCardList",[])}).onUpdate(function(){U.position.z=this.z,t.moveCamera()}).onComplete(function(){e.z=77.4}),i={x:4,y:8,z:82.4},n=new w.a.Tween(i).to({x:0,y:30,z:87.4},1e3).onUpdate(function(){t.moveCamera(this.x,this.y,this.z)}).onComplete(function(){i={x:4,y:8,z:82.4}});n.chain(a);var r={rad:W},o=new w.a.Tween(r).to({rad:W/2},2e3).onUpdate(function(){t.drift(11,this.rad,11,70,!0),t.moveCamera()}).onComplete(function(){r.rad=W});a.chain(o);var s={x:11},c=new w.a.Tween(s).to({x:80},4e3).onUpdate(function(){U.position.x=this.x,t.moveCamera()}).onComplete(function(){s.x=11});return o.chain(c),{begin:n,end:c}},inCurve:function(){var t=this,e=new w.a.Tween({}).to({},6e3).onStart(function(){t.signal2.position.set(0,.8,-4.5),t.signal2.tween.start(),t.$store.commit("setActCardList",["temp"])}),a=new w.a.Tween({}).to({},6e3).onStart(function(){t.signal2.position.set(1,-1.4,1),t.$store.commit("setActCardList",["weight"])}),i=new w.a.Tween({}).to({},6e3).onStart(function(){t.signal2.position.set(1,-1.85,2.8),t.$store.commit("setActCardList",["wheel"])}),n=new w.a.Tween({}).to({},6e3).onStart(function(){t.signal2.position.set(1,-1.85,2.8),t.$store.commit("setActCardList",["wheelalert"])}),r=new w.a.Tween({}).to({},6e3).onStart(function(){t.signal2.position.set(1,-1.4,1),t.$store.commit("setActCardList",["rollalert"])});e.chain(a),a.chain(i),i.chain(n),n.chain(r);var o={rad:-W/2},s=new w.a.Tween(o).to({rad:W/2},3e4).onStart(function(){e.start()}).onUpdate(function(){t.drift(59,this.rad,80,0);var e=64*A(this.rad-.1)+80,a=-64*O(this.rad-.1);t.moveCamera(e,4,a)}).onComplete(function(){t.signal2.tween.stop(),t.$store.commit("setActCardList",[]),o.rad=-W/2,j.x=0,j.y=30,j.z=10}),c={x:80},d=new w.a.Tween(c).to({x:-11},3e3).onUpdate(function(){U.position.x=this.x,t.moveCamera()}).onComplete(function(){c.x=80});return s.chain(d),{begin:s,end:d}},reversInUnload:function(){var t=this,e={rad:-W/2},a=new w.a.Tween(e).to({rad:0},3e3).onStart(function(){t.signal2.position.set(0,.9,0),t.signal2.tween.start()}).onUpdate(function(){t.drift(11,this.rad,-11,-70,!0),t.moveCamera()}).onComplete(function(){e.rad=-W/2}),i={z:-70},n=new w.a.Tween(i).to({z:-77.4},3e3).onUpdate(function(){U.position.z=this.z,t.moveCamera()}).onComplete(function(){i.z=-70});return a.chain(n),{begin:a,end:n}},unloading:function(){var t=this,e=new w.a.Tween({}).to({},4e3).onStart(function(){t.$store.commit("setActCardList",["location"])}),a=new w.a.Tween({}).to({},4e3).onStart(function(){t.unloadMatchSpace.tween.start(),t.$store.commit("setActCardList",["platform"])});e.chain(a);var i=new w.a.Tween({}).to({},1e3).onStart(function(){t.signal2.tween.stop(),t.unloadMatchSpace.tween.stop(),t.$store.commit("setTitle",{title:"园区停靠"}),t.$store.commit("setActCardList",["unloadstop"])});a.chain(i);var n={x:0,y:30,z:-87.4},r=new w.a.Tween(n).to({x:-4,y:5,z:-100},1e3).onUpdate(function(){t.moveCamera(this.x,this.y,this.z)}).onComplete(function(){n={x:0,y:30,z:-87.4}});i.chain(r);var o={x:-4,y:5,z:-100},s=new w.a.Tween(o).to({x:-4,y:8,z:-82.4},1e3).onUpdate(function(){t.moveCamera(this.x,this.y,this.z)}).onComplete(function(){o={x:-4,y:5,z:-100}}).delay(1e3);r.chain(s);var c=new w.a.Tween({}).to({},12e3).onStart(function(){t.$store.commit("setTitle",{title:"卸货"}),t.$store.commit("setActCardList",["unload","unloadtime"]);for(var e=t.goodsList,a=e.length-1;a>-1;a--)e[a].outTween.start()});return s.chain(c),{begin:e,end:c}},outUnload:function(){var t=this,e={z:-77.4},a=new w.a.Tween(e).to({z:-68},3e3).onStart(function(){i.x=0,i.y=30,i.z=10,t.$store.commit("setTitle",{}),t.$store.commit("setActCardList",[])}).onUpdate(function(){U.position.z=this.z,t.moveCamera()}).onComplete(function(){e.z=-77.4}),i={x:-4,y:8,z:-82.4},n=new w.a.Tween(i).to({x:0,y:30,z:-87.4},1e3).onUpdate(function(){t.moveCamera(this.x,this.y,this.z)}).onComplete(function(){i={x:-4,y:8,z:-82.4}});n.chain(a);var r={rad:0},o=new w.a.Tween(r).to({rad:-W/2},2e3).onUpdate(function(){t.drift(11,this.rad,-11,-68,!0),t.moveCamera()}).onComplete(function(){r.rad=0});a.chain(o);var s={x:-11},c=new w.a.Tween(s).to({x:-40},2e3).onUpdate(function(){U.position.x=this.x,t.moveCamera()}).onComplete(function(){s.x=-11,t.truckGroup.remove(t.backGroup),t.mainGroup.add(t.backGroup),t.backGroup.position.set(-40,2.3,-57),t.backGroup.rotation.y=W/2});o.chain(c);var d=new w.a.Tween({x:-40}).to({x:-50},3e3).onUpdate(function(){U.position.x=this.x;var e=Math.abs(U.position.x+50)/10*100;t.$store.commit("setTitle",{title:"摘挂",type:"connect",progress:e}),t.moveCamera()}).onComplete(function(){t.$store.commit("setTitle",{title:"任务完成"})}).delay(1e3);return c.chain(d),{begin:n,end:d}},inStation:function(){var t=this,e={rad:W/2},a=new w.a.Tween(e).to({rad:W},2e3).onUpdate(function(){t.drift(15,this.rad,-50,-42),t.moveCamera()}).onComplete(function(){t.$store.commit("setTitle",{}),e.rad=W/2}),i={z:-27},n=new w.a.Tween(i).to({z:10},3e3).onStart(function(){t.backGroup.position.set(-85,2.3,0),t.backGroup.rotation.y=-W/2}).onUpdate(function(){U.position.z=this.z,t.moveCamera()}).onComplete(function(){i.z=-27});return a.chain(n),{begin:a,end:n}},resetStart:function(){var t=this,e={rad:0},a=new w.a.Tween(e).to({rad:W/2},3e3).onStart(function(){window.$$vue.round++}).onUpdate(function(){t.drift(10,this.rad,-75,10,!0),t.moveCamera()}).onComplete(function(){console.log(t.camera.position),e.rad=0}),i=new w.a.Tween({x:-75,y:30,z:10}).to({x:-80,y:15,z:10},1e3).onUpdate(function(){t.moveCamera(this.x,this.y,this.z),t.camera.lookAt(t.v3(-80,0,0))});return a.chain(i),{begin:a,end:i}},drift:function(t,e,a,i){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=t*A(e)+a,o=-t*O(e)+i;U.position.x=r,U.position.z=o,U.rotation.y=n?e-W:e},moveCamera:function(t,e,a){var i=U.position,n=i.x,r=i.y,o=i.z;this.camera.position.set(t||n+j.x,e||r+j.y,a||o+j.z),this.camera.lookAt(U.position)}}},D=a("//Fk"),B=a.n(D),N=(a("4iZf"),a("CLMl"),0),X={methods:{initTruckParam:function(){this.truckParmas={width:2,height:2,headLength:1.7,trailerLength:5,wheelWidth:.55,wheelDiameter:.4,modelScale:.04,goodSize:.4,goodOffset:.01}},createTruck:function(){var t=this;return f()(d.a.mark(function e(){var a,i,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.initTruckParam(),e.next=3,t.loadModel();case 3:for(a=e.sent,t.headGroup=a[0],t.backGroup=a[1],t.createGoods(),i=0;i<3;i++)n=t.createSignal(),t["signal"+(i+1)]=n,0===i?t.headGroup.add(n):t.backGroup.add(n);case 8:case"end":return e.stop()}},e,t)}))()},loadModel:function(){var t=this.truckParmas,e=new B.a(function(e,a){var i=new THREE.Group;(new THREE.MTLLoader).load("static/G7Trailer-head.mtl",function(a){a.preload();var n=new THREE.OBJLoader;n.setMaterials(a),n.load("static/G7Trailer-head.obj",function(a){a.scale.set(t.modelScale,t.modelScale,t.modelScale),i.add(a),i.position.y=2.3,e(i)})})}),a=new B.a(function(e,a){var i=new THREE.Group;(new THREE.MTLLoader).load("static/G7Trailer-back.mtl",function(a){a.preload();var n=new THREE.OBJLoader;n.setMaterials(a),n.load("static/G7Trailer-back.obj",function(a){a.scale.set(t.modelScale,t.modelScale,t.modelScale),i.add(a),i.position.y=2.3,e(i)})})});return B.a.all([e,a])},createGoods:function(){var t=this;this.goodsList=[];var e=this.truckParmas;[[[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],[[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],[[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],[[1,1,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],[[1,0,0,0],[1,1,0,1],[1,1,1,1],[1,1,1,1]],[[0,0,0,1],[1,1,0,1],[1,1,1,1],[1,1,1,1]],[[1,0,0,0],[1,0,0,1],[1,1,0,1],[1,1,1,1],[1,1,1,1]],[[1,1,0,1],[1,1,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],[[1,0,0,0],[1,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],[[1,1,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],[[0,0,0,1],[1,0,1,1],[1,1,1,1],[1,1,1,1]],[[1,0,0,1],[1,1,1,1],[1,1,1,1]],[[0,0,0,1],[1,0,1,1],[1,1,1,1]],[[0,0,0,1],[1,0,1,1],[1,1,1,1]],[[1,0,0,0],[1,1,1,1]]].forEach(function(a,i){for(var n=function(n){var r=a[n];r.forEach(function(o,s){o&&function(a,i,n){var r=t.initGeometry("Cube",e.goodSize,e.goodSize,e.goodSize),o=t.initMaterial("MeshLambert",{color:16753920}),s=new THREE.Mesh(r,o);s.scale.set(.001,.001,.001),s.inTween=t.initGoodTween(s,N,{scale:.001},{scale:1}),s.inTween.onComplete(function(){t.goodsGroup.add(s)}),s.outTween=t.initGoodTween(s,211-N,{scale:1},{scale:.001}),s.outTween.onComplete(function(){t.goodsGroup.remove(s)}),s.position.set(a,i,n),t.goodsList.push(s),N++}((s-(r.length-1)/2)*(e.goodOffset+e.goodSize),(a.length-1-n)*(e.goodOffset+e.goodSize)-1.1,i*(e.goodSize+e.goodOffset)-4.5)})},r=a.length-1;r>-1;r--)n(r)}),this.backGroup.add(this.goodsGroup)},initGoodTween:function(t,e,a,i){return new w.a.Tween(a).to(i,100).onUpdate(function(){t.scale.set(this.scale,this.scale,this.scale)}).easing(w.a.Easing.Sinusoidal.InOut).delay(50*e)},createSignal:function(){var t=this,e=new THREE.Group,a=function(e,a){var i=t.initGeometry("Sphere",e,30,30,0,2*t.PI,0,2*t.PI),n=t.initMaterial("MeshBasic",{color:15551231,transparent:!0,opacity:a}),r=new THREE.Mesh(i,n);return r.scale.set(.001,.001,.001),r};return e.add(a(.12,.8)),e.add(a(.2,.4)),this.initSignalTween(e),e},initSignalTween:function(t){var e={index:.5};function a(){t.scale.set(1,1,1)}function i(){t.children[0].scale.set(this.index,this.index,this.index),t.children[1].scale.set(this.index,this.index,this.index)}function n(){t.scale.set(.001,.001,.001)}var r=new w.a.Tween(e).to({index:1},1e3).onStart(a).onUpdate(i).onStop(n),o=new w.a.Tween(e).to({index:.5},1e3).onStart(a).onUpdate(i).onStop(n);r.chain(o),o.chain(r),t.tween=r}}},J={methods:{initParkParams:function(){this.parkParams={stationWidth:32,stationLength:14,stationHeight:1,stationOffset:4.8,spaceWidth:2.8,spaceLength:12,spaceOffset:2,betweenOffset:.35,goodSize:.4,goodOffset:.01}},createPark:function(t){var e=this;return f()(d.a.mark(function a(){var i,n,r,o,s,c,l,f,h,m,p,u,v;return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:for(i=new THREE.Group,e.initParkParams(),n=e.parkParams,r=0;r<3;r++)(o=e.createStation()).position.x=(r-1)*(n.stationWidth+n.stationOffset),i.add(o);for(s=n.spaceOffset+n.spaceWidth,c=[-2*s,-s,s,2*s],l=0;l<4;l++)f=new THREE.Group,h=e.headGroup.clone(),m=e.backGroup.clone(),f.add(h),f.add(m),f.position.set(c[l],0,12.5),f.rotation.y=e.PI,i.add(f);return p=e.createMatchSpace(),t?e.unloadMatchSpace=p:e.loadMatchSpace=p,i.add(p),a.next=12,e.createForklift();case 12:return u=a.sent,i.add(u),a.next=16,e.createCargo();case 16:return v=a.sent,i.add(v),a.abrupt("return",i);case 19:case"end":return a.stop()}},a,e)}))()},createStation:function(){var t=new THREE.Group,e=this.parkParams,a=this.initGeometry("Cube",e.stationWidth,e.stationHeight,e.stationLength),i=this.initMaterial("MeshLambert",{color:1975874}),n=new THREE.Mesh(a,i);n.position.y=e.stationHeight/2,n.receiveShadow=!0,t.add(n);var r=this.createSpace();return t.add(r),t},createSpace:function(){for(var t=new THREE.Group,e=this.parkParams,a=0;a<7;a++){var i=new THREE.Group,n=[{x:-e.spaceWidth/2,y:0,z:0},{x:e.spaceWidth/2,y:0,z:0},{x:e.spaceWidth/2,y:0,z:e.spaceLength},{x:-e.spaceWidth/2,y:0,z:e.spaceLength},{x:-e.spaceWidth/2,y:0,z:0}],r=this.initLine(n,{color:2634321}),o=[{x:0,y:0,z:3},{x:0,y:0,z:e.spaceLength-3}],s=this.initLine(o,{color:2634321});i.add(r),i.add(s),i.position.x=(a-3)*(e.spaceWidth+e.spaceOffset),t.add(i)}return t.position.z=e.stationLength/2+e.betweenOffset,t},createMatchSpace:function(){var t=this.parkParams,e=[{x:-t.spaceWidth/2,y:0,z:0},{x:t.spaceWidth/2,y:0,z:0},{x:t.spaceWidth/2,y:0,z:t.spaceLength},{x:-t.spaceWidth/2,y:0,z:t.spaceLength},{x:-t.spaceWidth/2,y:0,z:0}],a=this.initLine(e,{color:15551231,transparent:!0,opacity:0});a.position.set(0,.05,t.stationLength/2+t.betweenOffset);var i={opacity:0};function n(){a.material.opacity=this.opacity}function r(){a.material.opacity=0,i.opacity=0}var o=new w.a.Tween(i).to({opacity:1},800).onUpdate(n).onStop(r),s=new w.a.Tween(i).to({opacity:0},800).onUpdate(n).onStop(r);return o.chain(s),s.chain(o),a.tween=o,a},createForklift:function(){var t=this;return new B.a(function(e){(new THREE.MTLLoader).load("static/forklift.mtl",function(a){a.preload();var i=new THREE.OBJLoader;i.setMaterials(a),i.load("static/forklift.obj",function(a){a.position.set(-7.5,3.3,0),a.rotation.y=-t.PI/1.5,a.scale.set(.04,.04,.04),e(a)})})})},createCargo:function(){var t=this;return new B.a(function(e){(new THREE.MTLLoader).load("static/Cargo.mtl",function(a){a.preload();var i=new THREE.OBJLoader;i.setMaterials(a),i.load("static/Cargo.obj",function(a){a.position.set(-7.5,3.3,5),a.rotation.y=-t.PI/2,a.scale.set(.04,.04,.04),e(a)})})})}}},V={methods:{initCurveParams:function(){this.curveParams={innerRadius:52,outerRadius:62,offsetX:80,buildWidth:4,buildLengh:4,lineWidth:.7,lineLength:7}},createCurve:function(){this.initCurveParams();var t=new THREE.Group,e=this.createRoad();t.add(e);var a=this.createRoadLine();t.add(a);var i=this.createRoadBuilding();return t.add(i),t},createRoad:function(){var t=this.curveParams,e=this.initGeometry("Ring",t.innerRadius,t.outerRadius,60,1,this.PI/2*3,this.PI);console.log(e);var a=this.initMaterial("MeshLambert",{color:1975874}),i=new THREE.Mesh(e,a);return i.rotation.x=-this.PI/2,i.position.x=t.offsetX,i},createRoadLine:function(){for(var t,e=this,a=this.curveParams,i=new THREE.Group,n=this.initMaterial("MeshLambert",{color:16777215}),r=this.PI/2*3+.1;r<this.PI/2*5-.2;r+=.3){var o=(void 0,t=e.initGeometry("Plane",a.lineWidth,a.lineLength),new THREE.Mesh(t,n)),s=57*this.cos(r),c=57*this.sin(r);o.position.set(s,c,.005),o.rotation.z=r,i.add(o)}return i.position.x=a.offsetX,i.rotation.x=-this.PI/2,i},createRoadBuilding:function(){for(var t=this,e=this.curveParams,a=new THREE.Group,i=this.initMaterial("MeshLambert",{color:1581112,transparent:!0,opacity:.7}),n=function(n,r){var o=10*Math.random()+2,s=t.initGeometry("Cube",e.buildWidth,o,e.buildLengh),c=new THREE.Mesh(s,i);c.position.set(r*t.cos(n)+e.offsetX,o/2,r*t.sin(n)),c.rotation.y=-n,a.add(c)},r=this.PI/2*3;r<=this.PI/2*5;r+=.2)n(r,e.innerRadius-4);for(var o=this.PI/2*3;o<=this.PI/2*5;o+=.25)n(o,e.innerRadius-10);for(var s=this.PI/2*3;s<=this.PI/2*5;s+=.15)n(s,e.outerRadius+4);for(var c=this.PI/2*3;c<=this.PI/2*5;c+=.12)n(c,e.outerRadius+10);return a}}},Z={methods:{createBuilding:function(){return new THREE.Group}}},q=(new THREE.Clock,{mixins:[H,F,X,J,V,Z],data:function(){return{PI:Math.PI,sin:Math.sin,cos:Math.cos,mainGroup:new THREE.Group,truckGroup:new THREE.Group,headGroup:new THREE.Group,backGroup:new THREE.Group,loadParkGroup:new THREE.Group,unloadParkGroup:new THREE.Group,goodsGroup:new THREE.Group}},methods:{initWebGL:function(){var t=this;return f()(d.a.mark(function e(){var a,i,n,r,o;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.initBasics(t.$refs.canvas,{position:{x:0,y:100,z:100},antialias:!0},{clearColor:1053727,shadowEnabled:!0}),i=a.scene,n=a.camera,r=a.renderer,t.scene=i,t.camera=n,t.renderer=r,t.scene.add(t.mainGroup),o=t.initStats(t.$refs.stats),e.next=8,t.addObject();case 8:t.initAnimate(),t.animateStart(),function t(){o.update(),w.a.update(),requestAnimationFrame(t),r.render(i,n)}();case 12:case"end":return e.stop()}},e,t)}))()},addObject:function(){var t=this;return f()(d.a.mark(function e(){var a,i,n,r,o;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.addLight(),e.next=3,t.createTruck();case 3:return t.mainGroup.add(t.truckGroup),a=t.createStart(),t.mainGroup.add(a),e.next=8,t.createPark(0);case 8:return(i=e.sent).position.set(0,0,90),i.rotation.y=t.PI,t.loadParkGroup=i,t.mainGroup.add(t.loadParkGroup),e.next=15,t.createPark(1);case 15:(n=e.sent).position.set(0,0,-90),t.unloadParkGroup=n,t.mainGroup.add(t.unloadParkGroup),r=t.createCurve(),t.mainGroup.add(r),o=t.createBuilding(),t.mainGroup.add(o);case 23:case"end":return e.stop()}},e,t)}))()},createStart:function(){var t=this.initLine([{x:16,y:0,z:-10},{x:16,y:0,z:10},{x:-16,y:0,z:10},{x:-16,y:0,z:-10},{x:16,y:0,z:-10}],{color:2634321});return t.position.x=-80,t},addAxes:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=this.initAxes(t);this.mainGroup.add(e)},addLight:function(){var t=new THREE.Group,e=this.initLight("Ambient",{color:15658734});t.add(e);var a=this.initLight("Directional",{color:15658734,position:{x:-80,y:100,z:0},castShadow:!0,shadow:{camera:{near:2,far:220,left:-100,right:100,top:130,bottom:-80},mapSize:{width:2048,height:2048}}}),i=this.initTarget(0,0,0);a.target=i;new THREE.CameraHelper(a.shadow.camera);t.add(a),this.mainGroup.add(t)},addControl:function(){return this.initControls("Trackball",this.camera,{rotateSpeed:1,zoomSpeed:1,panSpeed:1})}},components:{board:_},mounted:function(){this.initWebGL()}}),Y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("div",{ref:"stats"}),this._v(" "),e("board"),this._v(" "),e("div",{ref:"canvas",attrs:{id:"WebGL-output"}})],1)},staticRenderFns:[]};var K=a("VU/8")(q,Y,!1,function(t){a("Ll3f")},"data-v-5e5f8de2",null).exports;i.a.use(b.a);var Q=new b.a({routes:[{path:"/",redirect:"/trailer"},{path:"/trailer",name:"trailer",component:K}]}),tt=a("J/MC"),et=a.n(tt);a("r7R4");i.a.config.productionTip=!1,window.Vue=i.a,window.Bridge=new i.a,i.a.use(et.a),new i.a({el:"#app",router:Q,components:{App:v},template:"<App/>"})},NjGp:function(t,e){},bTTk:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".container #WebGL-output[data-v-5e5f8de2],.container[data-v-5e5f8de2]{height:100%}",""])},kdcS:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".card-group[data-v-7297fede]{width:100%;height:100%;position:absolute}.card-stop[data-v-7297fede]{top:15%;right:30%}.card-stop .con[data-v-7297fede]{font-size:.3rem;color:#fff}.card-stop .con span[data-v-7297fede]{margin-left:.23rem;color:#22bbf2}.card-load[data-v-7297fede]{top:30%;right:20%}.card-load .con[data-v-7297fede]{font-size:.3rem;color:#22bbf2}.card-load .con span[data-v-7297fede]{margin-left:.73rem}.card-loadtime[data-v-7297fede]{top:45%;right:20%}.card-loadtime .con[data-v-7297fede]{font-size:.46rem;color:#22bbf2}.card-unload[data-v-7297fede]{top:20%;right:20%}.card-unload .con[data-v-7297fede]{font-size:.3rem;color:#ed18cc}.card-unload .con span[data-v-7297fede]{margin-left:.73rem}.card-unloadtime[data-v-7297fede]{top:45%;right:20%}.card-unloadtime .con[data-v-7297fede]{font-size:.46rem;color:#ed18cc}.card-temp[data-v-7297fede]{top:30%;right:22%}.card-temp .con img[data-v-7297fede]{width:.7rem;left:.14rem;top:.2rem}.card-temp .con p[data-v-7297fede]{font-size:.22rem;color:#fff;margin-bottom:.15rem}.card-temp .con p[data-v-7297fede]:last-child{margin-bottom:0}.card-temp .con p span[data-v-7297fede]{color:#22bbf2;margin-left:.2rem}.card-weight[data-v-7297fede]{top:50%;right:22%}.card-weight .con img[data-v-7297fede]{width:.8rem;left:.1rem;top:.2rem}.card-weight .con p[data-v-7297fede]{font-size:.22rem;color:#fff;margin-bottom:.15rem}.card-weight .con p[data-v-7297fede]:last-child{margin-bottom:0}.card-weight .con p span[data-v-7297fede]{color:#22bbf2;margin-left:.2rem}.card-wheel[data-v-7297fede]{top:60%;right:30%}.card-wheel .con img[data-v-7297fede]{width:.65rem;left:.17rem;top:.25rem}.card-wheel .con p[data-v-7297fede]{font-size:.22rem;color:#fff;margin-bottom:.15rem}.card-wheel .con p[data-v-7297fede]:last-child{margin-bottom:0}.card-wheel .con p:last-child span[data-v-7297fede]{color:#ed18cc}.card-wheel .con p span[data-v-7297fede]{color:#22bbf2;margin-left:.2rem}.card-wheelalert[data-v-7297fede]{top:60%;right:30%}.card-wheelalert img[data-v-7297fede]{width:.65rem;left:.17rem;top:.25rem}.card-wheelalert .con p[data-v-7297fede]{color:#fff;font-size:.22rem;margin-bottom:.15rem}.card-wheelalert .con p[data-v-7297fede]:last-child{color:#ed18cc;margin-bottom:0}.card-rollalert[data-v-7297fede]{top:50%;right:30%}.card-rollalert img[data-v-7297fede]{width:.65rem;left:.17rem;top:.25rem}.card-rollalert .con p[data-v-7297fede]{color:#fff;font-size:.22rem;margin-bottom:.15rem}.card-rollalert .con p[data-v-7297fede]:last-child{color:#ed18cc;margin-bottom:0}.card-img[data-v-7297fede]{position:absolute;top:65%;right:20%}.card-img img[data-v-7297fede]{display:block;width:240px;border:3px solid #fff}.card-active[data-v-7297fede]{opacity:.9!important;-webkit-animation-duration:1s;animation-duration:1s;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-backface-visibility:visible!important;backface-visibility:visible!important;-webkit-animation-name:flipInX;animation-name:flipInX}.card[data-v-7297fede]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 .15rem;line-height:1;position:absolute;width:2.8rem;height:1.1rem;-webkit-transition:opacity .5s linear;transition:opacity .5s linear;opacity:0}.card-title[data-v-7297fede]{line-height:1;font-size:.18rem;position:absolute;top:-.09rem;left:0}.card hr[data-v-7297fede]{position:absolute;border:none;opacity:.3}.card-t[data-v-7297fede]{width:62%;height:2px;top:0;right:0}.card-l[data-v-7297fede]{width:2px;height:80%;left:0;bottom:0}.card-r[data-v-7297fede]{width:2px;height:.8rem;top:0;right:0}.card-b[data-v-7297fede]{width:2.5rem;height:2px;bottom:0;left:0}.card-br[data-v-7297fede]{width:.42426rem;height:2px;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);right:-4px;bottom:.14rem}.card .con[data-v-7297fede]{display:-webkit-box;display:-ms-flexbox;display:flex}.card .con img[data-v-7297fede]{position:absolute}.card .con .split[data-v-7297fede]{width:2px;height:.6rem;margin:0 .3rem 0 .8rem;position:relative}.card-blue[data-v-7297fede]{color:#22bbf2}.card-blue hr[data-v-7297fede]{background:#22bbf2}.card-red[data-v-7297fede]{color:#ed18cc}.card-red hr[data-v-7297fede]{background:#ed18cc}.board[data-v-7297fede]{width:100%;height:100%;position:absolute;z-index:999;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;line-height:1}.board .title-basic[data-v-7297fede]{font-size:.48rem;color:#fff}.board .title-connect[data-v-7297fede]{width:10rem;height:1.89rem;background:rgba(17,22,35,.7);border:2px solid rgba(30,222,255,.2);-webkit-box-orient:vertical;-ms-flex-direction:column;flex-direction:column;line-height:1;padding:.51rem .85rem .35rem}.board .title-connect-text[data-v-7297fede],.board .title-connect[data-v-7297fede]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-direction:normal;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.board .title-connect-text[data-v-7297fede]{width:100%;-webkit-box-orient:horizontal;-ms-flex-direction:row;flex-direction:row}.board .title-connect-text span[data-v-7297fede]{font-size:.32rem;color:#747ea5}.board .title-connect-text .main[data-v-7297fede]{font-size:.48rem;color:#22bbf2}.board .title-connect .progress[data-v-7297fede]{width:90%;height:8px;background:#000;position:relative}.board .title-connect .progress .left[data-v-7297fede],.board .title-connect .progress .right[data-v-7297fede]{position:absolute;height:100%;background:#22bbf2}.board .title-connect .progress .left[data-v-7297fede]{left:0}.board .title-connect .progress .right[data-v-7297fede]{right:0}.board .title-trailer[data-v-7297fede]{width:8rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center;line-height:1}.board .title-trailer span[data-v-7297fede]{font-size:.48rem;color:#3a456f}.board .title-trailer img[data-v-7297fede]{width:2.22rem}.title-bar[data-v-7297fede]{position:absolute;width:100%;top:.78rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;line-height:1}.title-bar p[data-v-7297fede]{font-size:.48rem;color:#3a456f}.left-bar[data-v-7297fede]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.left-bar .left-sec[data-v-7297fede]{display:-webkit-box;display:-ms-flexbox;display:flex;line-height:1;margin:0 0 .3rem .37rem}.left-bar .left-sec[data-v-7297fede]:last-child{margin-bottom:0}.left-bar .left-sec .icon[data-v-7297fede]{width:.64rem;height:.64rem;margin-right:.2rem}.left-bar .left-sec .num[data-v-7297fede]{font-size:.38rem;color:#c7cfee;margin-bottom:.06rem}.left-bar .left-sec .desc[data-v-7297fede]{font-size:.18rem;color:#5865b5}.right-bar[data-v-7297fede]{line-height:1;padding:0 .16rem 0 .24rem;background-image:linear-gradient(149deg,#31338f,#161756 93%)}.right-bar .right-top[data-v-7297fede]{display:-webkit-box;display:-ms-flexbox;display:flex;padding:.39rem 0 .71rem}.right-bar .right-top-left[data-v-7297fede]{margin-right:.69rem}.right-bar .right-top .num[data-v-7297fede]{font-size:.26rem;color:#c7cfee;margin-bottom:.1rem}.right-bar .right-top .desc[data-v-7297fede]{font-size:.18rem;color:#5865b5;margin-bottom:.24rem}.right-bar .right-top .desc[data-v-7297fede]:last-child{margin-bottom:0}.right-bar .right-middle[data-v-7297fede]{padding:.28rem 0 .1rem;position:relative;display:-webkit-box;display:-ms-flexbox;display:flex}.right-bar .right-middle-left[data-v-7297fede]{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:distribute;justify-content:space-around}.right-bar .right-middle .middle-sec[data-v-7297fede]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:.28rem}.right-bar .right-middle .middle-sec[data-v-7297fede]:last-child{margin-bottom:0}.right-bar .right-middle .middle-sec .icon[data-v-7297fede]{line-height:1;width:.46rem;height:.46rem;border-radius:.23rem;font-size:.18rem;color:#c7cfee;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border:1px solid #5865b5;margin-bottom:.1rem}.right-bar .right-middle .middle-sec .desc[data-v-7297fede]{font-size:.18rem;color:#5865b5}.right-bar .right-middle .middle-sec .desc .num[data-v-7297fede]{color:#c7cfee}.right-bar .right-bottom[data-v-7297fede]{padding:.29rem .15rem .52rem 0;position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.right-bar .right-bottom .bottom-sec[data-v-7297fede]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.right-bar .right-bottom .bottom-sec img[data-v-7297fede]{width:.46rem;height:.46rem;margin-bottom:.1rem}.right-bar .right-bottom .bottom-sec .desc[data-v-7297fede]{font-size:.18rem;color:#5865b5}.right-bar .right-bottom .bottom-sec .desc .num[data-v-7297fede]{color:#c7cfee}.right-bar .sub-title[data-v-7297fede]{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:absolute;top:-.09rem}.right-bar .sub-title span[data-v-7297fede]{font-size:.18rem;color:#5865b5;padding-right:.126rem}.right-bar .sub-title hr[data-v-7297fede]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;border:none;height:1px;background:#5865b5;opacity:.66}.bottom-bar[data-v-7297fede]{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:absolute;bottom:.28rem}.bottom-bar .bottom-sec[data-v-7297fede]{line-height:1;margin-right:1.3rem}.bottom-bar .bottom-sec[data-v-7297fede]:last-child{margin:0}.bottom-bar .bottom-sec .num[data-v-7297fede]{color:#c7cfee;font-size:.46rem;margin-bottom:.1rem}.bottom-bar .bottom-sec .num .unit[data-v-7297fede]{color:#fff;font-size:.22rem;margin-left:.2rem}.bottom-bar .bottom-sec .desc[data-v-7297fede]{font-size:.22rem;color:#5865b5}",""])},qMCW:function(t,e){},r7R4:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.5e8d8ea93211b72493df.js.map